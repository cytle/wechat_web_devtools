;!function(require, directRequire){;'use strict';const miniProgramMenu=require('./c8f9a38f906c462500d1d8c38f4bac7a.js'),miniProgramSimpleMenu=require('./d6a4005cc6e9fb5b030ef47f546d825f.js'),webDebugMenu=require('./535a84422c995fb798afe973987dd942.js'),store=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),C=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),locales=require('./common/locales/index.js');let updateWinList=[],menu=global.isSimple?miniProgramSimpleMenu:miniProgramMenu;const init=(a)=>{const b=store.getState();menu=b.window&&b.window.mainWindow===C.MAIN_WINDOW_TYPE.WEB_DEBUGGER?webDebugMenu:global.isSimple?miniProgramSimpleMenu:miniProgramMenu,menu.init(a),subscribeUpdate(a),prevState=b},update=()=>{updateWinList.forEach((a)=>{menu.update(a)})},condictionDiff=(a,b)=>a.project&&a.project.current&&b.project&&b.project.current&&a.project.current.condiction!==b.project.current.condiction,projectAttrDiff=(a,b)=>a.project&&a.project.current&&b.project&&b.project.current&&a.project.current.attr!==b.project.current.attr,shortcutsDiff=(a,b)=>a.settings&&a.settings.shortcuts&&b.settings&&b.settings.shortcuts&&a.settings.shortcuts!==b.settings.shortcuts,idepluginDiff=(a,b)=>{return a.config.pluginManifests!==b.config.pluginManifests};let prevState=store.getState();store.subscribe(()=>{const a=store.getState();(prevState.git!==a.git||prevState.window!==a.window||shortcutsDiff(prevState,a)||condictionDiff(prevState,a)||projectAttrDiff(prevState,a)||idepluginDiff(prevState,a))&&update(),prevState=a});const subscribeUpdate=(a)=>{const b=updateWinList.findIndex((b)=>{return b===a});-1===b&&updateWinList.push(a)},unSubscribeUpdate=(a)=>{updateWinList=updateWinList.filter((b)=>{return b!==a})};locales.onChangeLocale(()=>{updateWinList.forEach((a)=>{init(a)}),update()}),module.exports={init,update,subscribeUpdate,unSubscribeUpdate};
;}(require("lazyload"), require);

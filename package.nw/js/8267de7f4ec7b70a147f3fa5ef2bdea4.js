'use strict';!function(require,directRequire){async function a(a){let j=await h(a),n=j.srcPath,o=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),p='app.json',q='',r=[];try{q=j.getFile(p)}catch(a){let b=new Error(e.config.FILE_NOT_FOUND.format(p));throw b.code=m.APP_JSON_READ_ERR,b.ext=a.toString(),b}let s={};try{s=JSON.parse(q)}catch(a){let b=k.parseJsonParseErr({data:q,error:a}),c=new Error(b);throw c.code=m.APP_JSON_PARSE_ERR,c}let t=a.compileType,u=s.pages||[];if('array'!=d.getType(u)||0===u.length){let a=new Error(e.config.ENTRANCE_NOT_FOUND.format(JSON.stringify(u)));throw a.code=m.APP_JSON_ENTRANCE_NOT_FOUND_ERR,a}let v=!s.entryPagePath,w={};for(let d,f=0;f<u.length;f++){if(d=u[f],w[d]){let a=new Error(e.config.JSON_PAGES_REPEAT.format([p,d]));throw a.code=m.APP_JSON_PAGES_ERR,a}if(w[d]=!0,v||d!=s.entryPagePath||(v=!0),!c.existsSync(b.join(n,`${u[f]}\.wxml`))){let a=new Error(e.config.JSON_PAGE_WXML_NOT_EXISTS.format([p,'pages',d]));throw a.code=m.APP_JSON_WXML_NOT_FOUND,a}if(!c.existsSync(b.join(n,`${u[f]}\.js`))){let a=new Error(e.config.JSON_PAGE_JS_NOT_EXISTS.format([p,'pages',d]));throw a.code=m.APP_JSON_JS_NOT_FOUND,a}}let x=s.tabBar;if(x){let a;if('array'!=d.getType(x.list))a=new Error(e.config.JSON_TABBAR_SHOULD_BE_LIST);else if(!x.list||x.list.length<o.setting.MinTabbarCount)a=new Error(e.config.JSON_TABBAR_AT_LEAST.format(o.setting.MinTabbarCount));else if(x.list.length>o.setting.MaxTabbarCount)a=new Error(e.config.JSON_TABBAR_AT_MOST.format(o.setting.MaxTabbarCount));else{r=[];for(var y=0;y<x.list.length;y++){let a=x.list[y];if(0>u.indexOf(a.pagePath)){r.push(`tabBar[${y}].pagePath "${a.pagePath}" 需在 pages 数组中`);continue}if('object'!=d.getType(a)){r.push(e.config.JSON_TABBAR_ITEM_OBJECT.format(y));continue}let f=a.pagePath;if(!f){r.push(e.config.JSON_TABBAR_PATH_EMPTY.format(y));continue}if('string'!=d.getType(f)){r.push(e.config.JSON_TABBAR_PATH_STRING.format(y));continue}2<=f.split('?').length&&r.push(e.config.JSON_TABBAR_PATH_NOT_CONTAIN.format([y,'?'])),2<=f.split('.').length&&r.push(e.config.JSON_TABBAR_PATH_NOT_CONTAIN.format([y,'.']));let g=[];if(a.iconPath){let c=b.join(n,a.iconPath);a.iconPath=b.relative(n,c),g.push({name:'iconPath',path:c})}if(a.selectedIconPath){let c=b.join(n,a.selectedIconPath);a.selectedIconPath=b.relative(n,c),g.push({name:'selectedIconPath',path:c})}g.forEach((a)=>{if(!c.existsSync(a.path))return r.push(e.config.JSON_TABBAR_ICON_NOT_FOUND.format([y,a.name]));let d=c.statSync(a.path);if(d.isDirectory())return r.push(e.config.JSON_TABBAR_ICON_NOT_DIR.format([y,a.name]));d.size>1024*o.setting.MaxTabbarIconSize&&r.push(e.config.JSON_TABBAR_ICON_MAX_SIZE.format([y,a.name,o.setting.MaxTabbarIconSize]));let f=b.extname(a.path);0>l.indexOf(f)&&r.push(e.config.JSON_TABBAR_ICON_EXT.format([y,a.name,l.join('\u3001')]))})}0<r.length&&(a=new Error(r.join('\n')))}if(a)throw a.code=m.APP_JSON_CONTENT_ERR,a}if(t==g.conversation||t==g.search){let f,g=s.widgets,h='';if(!g)f=new Error(e.config.JSON_WIDGETS_EMPTY.format('app.json'));else if('array'!=d.getType(g))f=new Error(e.config.JSON_WIDGETS_NOT_ARRAY.format('app.json'));else{let i=[];g.forEach((f,g)=>{if('object'!=d.getType(f))i.push(e.config.JSON_WIDGETS_ITEM_NOT_OBJECT.format(['app.json',g]));else if('conversation'!=f.type&&'search'!=f.type)i.push(e.config.JSON_WIDGETS_TYPE_INVALID.format(['app.json',g,'conversation\u3001search']));else if(!f.path||'string'!=d.getType(f.path))i.push(e.config.JSON_WIDGETS_PATH_NOT_FOUND.format(['app.json',g]));else if(!c.existsSync(b.join(n,f.path)))i.push(e.config.JSON_WIDGETS_PATH_NOT_FOUND.format(['app.json',g]));else{let a=c.statSync(b.join(n,f.path));a.isDirectory()?!c.existsSync(b.join(n,f.path,'widget.js'))&&i.push(e.config.JSON_WIDGETS_JS_NOT_FOUND.format(['app.json',g,'widget.js'])):i.push(e.config.JSON_WIDGETS_PATH_SHOULD_BE_DIR.format(['app.json',g]))}h||f.type!=a.compileType||(h=f.path)}),h||i.push(e.config.JSON_WIDGETS_TYPE_NOT_FOUND.format(['app.json',a.compileType])),0<i.length&&(f=new Error(i.join('\n')))}if(f)throw f.code=m.APP_JSON_CONTENT_ERR,f}let i=await f(a);if(i)for(let a in i)'extPages'!=a&&(s[a]='object'==d.getType(i[a])?Object.assign({},s[a]||{},i[a]):i[a]);if(s.subPackages){if('array'!=d.getType(s.subPackages)){let a=new Error(e.config.JSON_CONTENT_SHOULD_BE.format(['subPackages','array']));throw a.code=m.APP_JSON_CONTENT_ERR,a}let a={},f={},g=[];if(s.subPackages.forEach((h,i)=>{if('string'!=d.getType(h.root))return void g.push(e.config.JSON_CONTENT_SHOULD_BE.format([`subPackages[${i}].root`,'string']));h.root=b.posix.join(h.root,'/');let j=-1;if(s.subPackages.forEach((a,c)=>{c!=i&&a.root&&0<=h.root.indexOf(b.posix.join(a.root,'/'))&&(j=c)}),-1!=j)return void g.push(e.config.JSON_CONTENT_SHOULD_NOT_BE.format([`subPackages[${i}].root`,`subPackages[${j}].root 的子目录`]));if(u.forEach((a)=>{0==a.indexOf(h.root)&&g.push(e.config.JSON_PAGE_SHOULD_NOT_IN_SUBPACKAGE.format([`pages ${a}`,`subPackages[${i}]`]))}),!c.existsSync(b.join(n,h.root)))return void g.push(e.config.JSON_CONTENT_SHOULD_BE.format([`subPackages[${i}].root`,'\u76EE\u5F55']));let k=c.statSync(b.join(n,h.root));return k.isDirectory()?a[h.root]?void g.push(e.config.JSON_SUBPACKAGE_EXIST.format([`subPackages[${i}].root`])):(a[h.root]=!0,'array'==d.getType(h.pages)?void h.pages.forEach((a)=>{let d=b.posix.join(h.root,a);return f[d]?void g.push(e.config.JSON_PAGES_REPEAT.format([`subPackages[${i}]`,a])):void(f[d]=!0,!v&&d==s.entryPagePath&&(v=!0),!c.existsSync(b.join(n,`${d}\.wxml`))&&g.push(e.config.JSON_PAGE_WXML_NOT_EXISTS.format([`subPackages[${i}]`,'pages',d])),!c.existsSync(b.join(n,`${d}\.js`))&&g.push(e.config.JSON_PAGE_JS_NOT_EXISTS.format([`subPackages[${i}]`,'pages',d])))}):void g.push(e.config.JSON_CONTENT_SHOULD_BE.format([`subPackages[${i}].pages`,'array']))):void g.push(e.config.JSON_CONTENT_SHOULD_BE.format([`subPackages[${i}].root`,'\u76EE\u5F55']))}),0<g.length){let a=new Error(g.join('\n'));throw a.code=m.APP_JSON_CONTENT_ERR,a}}if(!v){let a=new Error(e.config.JSON_ENTRY_PAGE_PATH_NOT_FOUND.format(['pages\u3001subPackages','entryPagePath']));throw a.code=m.APP_JSON_PAGES_ERR,a}if(s.window&&(r=[],['enablePullDownRefresh'].forEach((a)=>{'undefined'!=typeof s.window[a]&&'boolean'!=typeof s.window[a]&&r.push(e.config.JSON_CONTENT_SHOULD_BE.format([a,'boolean']))})),0<r.length){let a=new Error(r.join('\n'));throw a.code=m.APP_JSON_CONTENT_ERR,a}return s}const b=require('path'),c=require('fs'),d=require('./84b183688a46c9e2626d3e6f83365e13.js'),e=require('./common/locales/index.js'),f=require('./551bb965e1f344281d555a429cd2140c.js'),g=require('./9fdd4ac31a05c27355910f0d74accd4c.js'),h=require('./162bf2ee28b76d3b3d95b685cede4146.js'),i=require('./2dfc6a3df6d6fc51266b293c8420e88b.js'),j=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),k=require('./6238a86bb7a55c11aa0f9eb335d0f34c.js'),l=['.png','.jpg','.jpeg'],m=require('./949d8235c744ced2a80121e4dba34c28.js');module.exports=async function(b){try{return await a(b)}catch(a){throw a.code||(a.code=m.APP_JSON_CONTENT_ERR),a}}}(require('lazyload'),require);
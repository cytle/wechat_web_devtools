'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};!function(require,directRequire){const a=require('systeminformation'),b=require('./84858de8a097c9cf84ff2c2e3d86e2a9.js'),c=require('./c016c015550b8c8e4a79e8e85062bd17.js'),d=require('./76d9df7b0b3e47fbe17881420a4bef86.js'),e=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),f=require('./dca9191eced65b3831d60c02d8d487c2.js'),g=require('./ba23d8b47b1f4ea08b9fd49939b9443f.js'),h=require('./a8c87029da0fa06e986298d447ab0fe2.js'),i=require('./cc2c2970ff81ae4a83123e81ee123da2.js'),j=require('./e98c60a262d8d98e69e574a9d12a21df.js'),k=require('./84b183688a46c9e2626d3e6f83365e13.js'),l=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),m=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),n=require('./205e69607c4b60711b15f5ac95b40ce4.js'),o=require('./2a0793d184cc5f699ba18197a7403b19.js'),p=require('./72653d4b93cdd7443296229431a7aa9a.js'),q=require('./ad04a51e8143d9d44480aafa80bd4fc1.js'),r=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),s=r.dispatch.bind(r);let t;module.exports={[c.Name.QUIT]:async()=>{return setTimeout(()=>{k.quit()}),{status:d.Success}},[c.Name.CLOSE]:async()=>{return r.dispatch(i.closeProject()),{status:d.Success}},[c.Name.COMPILE]:async(a,b)=>{var c=Number.isNaN,e=Number.parseFloat;const f=b&&b.condition;let h;console.warn('command',a),console.warn('rdata',b),console.warn('condition',f);let k;if(f)try{k=JSON.parse(f)}catch(a){try{p.error('parse rawCondition failed: ',a.toString())}catch(a){console.error('parse rawCondition failed: ',a.toString())}}if(k){try{p.info('condition: ',k)}catch(a){}if(k.query||k.path_name)try{if(h={id:+new Date,name:(+new Date).toString(),scene:k.scene},!k.query){const a=k.path_name.split('?');h.pathName=a[0],h.query=a[1]||''}else h.pathName=k.path_name,h.query=k.query;if(h.scene===m.SCENE_SHARE_TICKET){const a=r.getState(),b=project.runtimeAttr&&project.runtimeAttr.share_info||[];if(b.length){const a=Math.floor(Math.random()*b.length),c=b[a];h.shareInfo={groupName:c.room_topic,shareName:c.share_name,shareKey:c.share_key}}}if(k.referrer_info){const a=h.scene;k.referrer_info.appid&&(a==m.SCENE_MINI_PROGRAM||a==m.SCENE_MINI_PROGRAM_BACK||a==m.SCENE_PROFILE||a==m.SCENE_CUSTOM_MENU||a==m.SCENE_APP_SHARE_MESSAGE||a==m.SCENE_TEMPLETE_MESSAGE)&&(h.referrerInfo=h.referrerInfo||{},h.referrerInfo.appid=k.referrer_info.appid),k.referrer_info.extra_data&&(a==m.SCENE_MINI_PROGRAM||a==m.SCENE_MINI_PROGRAM_BACK)&&(h.referrerInfo=h.referrerInfo||{},h.referrerInfo.extraData=k.referrer_info.extra_data)}s(i.setCompileCondiction(h))}catch(a){h=null,console.error('set compile condition failed with error: ',a);try{p.error('set compile condition failed with error: ',a)}catch(a){}}}try{let a,b,d=!1;if(k&&k.location){let{longitude:f,latitude:g}=k.location;f=e(f),g=e(g),c(f)||c(g)||(d=!0,a=f,b=g,console.warn('enter'))}if(!d){let c;t?c=t:t=c=q.getRandomGeo(),a=c.longitude,b=c.latitude}s(j.setGeoSetting(_extends({},q.getDefault(),{longitude:a,latitude:b,enabled:!0})))}catch(a){console.error('set custom geolocation failed with error: ',a);try{p.error(`set custom geolocation failed with error: ${a.toString()}`)}catch(a){}}return await new Promise((a)=>setTimeout(a,1e3)),r.dispatch(g.compileImmediate()),{status:d.Success}},[c.Name.WEIXINJSBRIDGE_INVOKE]:async(a,b)=>{const c=a.getParameter('api'),g=`${Math.random()}${Date.now()}`;return new Promise((a)=>{f.exec({api:c,callbackID:g,args:b.parameters}).then((a)=>{a&&s({type:e.ASSDK_CALLBACK,res:a,callbackID:g})}),r.subscribe(()=>{const b=r.getState(),c=b.simulator.assdkCallbackInfo;c.callbackID==g&&a({status:d.Success,value:c.res})})})},[c.Name.GET_WECHATDEVTOOLS_STORE_STATE]:async()=>{const a=r.getState();return{status:d.Success,value:a}},[c.Name.REFRESH_TICKET]:async(a,c)=>{const f={city:'Guangzhou',contry:'CN',headUrl:'http://wx.qlogo.cn/mmhead/PiajxSqBRaEJU1TapG4Amk5WtRy7mD4NrNU5ibZ15ITVw004CxHGjsCw/132',newticket:c.ticket,nickName:'Can\uD83C\uDF34',openid:'o6zAJswvMl4_S2x88N5vmH5NwMEk',province:'Guangdong',sex:'male',signature:'JGe3uQ1dylqLXtPSQWk_kwEofTpraqi9CPxGvdRHtF0',signatureExpiredTime:Date.now()+86400000,ticketExpiredTime:Date.now()+86400000};return b.userInfo=f,s({type:e.USER_LOGIN_SUCCESS,userInfo:f}),s(h.setMainWindow(l.MAIN_WINDOW_TYPE.ENTRANCE)),{status:d.Success}},[c.Name.GET_APP_CACHE_STATUS]:async()=>({status:d.Success}),[c.Name.GET_RUNTIME_INFO]:async()=>new Promise((b)=>{chrome.processes.getProcessInfo([],!0,async(c)=>{const d={};let e=0;for(const a in c){const b=c[a];b.privateMemory&&(e+=b.privateMemory,d[b.osProcessId]=!0)}e=e/1024/1024;const f=await a.processes(),g=f.list.filter((a)=>d[a.pid]).map((a)=>a.pcpu).reduce((a,b)=>a+b,0);b({status:0,value:{cpu:g,memory:e}})})})}}(require('lazyload'),require);
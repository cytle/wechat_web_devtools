'use strict';!function(require,directRequire){var a=Math.max;const b=require('react'),c=require('./3b5f8e2469c474c8d433c1c6926d8999.js');class d extends b.Component{constructor(a){super(a),this.state={translateX:0,lazyLoaded:!1}}componentWillReceiveProps(b){if(b.show){let c=b.current,d=b.urls||[];c=d.indexOf(c),c=a(c,0),this.setState({translateX:-c*b.width,lazyLoaded:!0})}}hide(){this.props.hidePreviewImage()}onMouseDown(a){this.startX=a.pageX,this.touch=!0,this.lastTranslateX=this.state.translateX}onMouseMove(b){if(!this.touch)return;let c=b.pageX-this.startX+this.lastTranslateX;c=Math.min(0,c),c=a((1-this.props.urls.length)*this.props.width,c),this.setState({translateX:c}),this.moved=!0}onMouseUp(){this.startX=0,this.touch=!1,this.setState({translateX:parseInt(this.state.translateX/this.props.width-0.5)*this.props.width}),setTimeout(()=>{this.moved=!1})}onMouseEnter(){}onClick(){this.moved||this.hide()}render(){if(!this.state.lazyLoaded)return null;let a=this.props,c={display:a.show?'block':'none',transition:'all linear 0.3s',width:`${100*a.urls.length}%`,transform:`translate(${this.state.translateX}px,0)`},d=a.urls.map((c,d)=>{let e=c;return'string'==typeof c&&0<=c.indexOf('wxfile://')&&(e=c.replace('wxfile://','http://wxfile.open.weixin.qq.com/')),b.createElement('span',{key:d,className:'weui-gallery__img',style:{backgroundImage:`url('${e}')`,width:a.width,left:d*a.width}})});return b.createElement('div',{className:'weui-gallery',style:c,onClick:this.onClick.bind(this),onMouseDown:this.onMouseDown.bind(this),onMouseMove:this.onMouseMove.bind(this),onMouseUp:this.onMouseUp.bind(this),onMouseLeave:this.onMouseUp.bind(this),onMouseEnter:this.onMouseEnter.bind(this)},d)}}module.exports=d}(require('lazyload'),require);
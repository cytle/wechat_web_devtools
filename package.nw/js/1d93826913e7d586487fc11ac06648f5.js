'use strict';!function(require,directRequire){const a=require('fs'),b=require('path'),c=require('react'),d=require('moment'),e=require('classnames'),f=require('./3b5f8e2469c474c8d433c1c6926d8999.js'),g=require('./4247893aa775b1bbd1b33272249f2906.js'),h=require('./efca46d675165423879efe144504d758.js'),i=require('./ae7839ba7720ad42a8e26fcddb5eec71.js'),j=require('./da7c31daaf542cf1796023d8e344b98a.js'),k=require('./f6cbcecf6ed9f533f6a506310d8f07b6.js'),{getWeappCodeSize:l}=require('./3bfffbe88b3d923921f851c0697974fe.js');class m extends c.Component{constructor(a){super(a),this.state={lazyLoaded:!!a.show,show:!1,animationType:'none',codePackageLength:0},d.locale(navigator.language)}componentDidMount(){this.props.show&&this.setState({show:!0,animationType:'show'}),this.getCodePackageLength()}componentWillReceiveProps(a){a.show?(this.setState({lazyLoaded:!0}),this.getCodePackageLength(),!this.props.show&&('qcloud'===a.selected||'config'===a.selected)&&this.props.requestProjectAttr(),!this.props.show&&'setting'===a.selected&&this.props.getPublicLibUsageRate()):this.setState({showDropDown:!1}),!this.props.show&&a.show?this.setState({show:!0,animationType:'show'}):this.props.show&&!a.show&&this.setState({animationType:'hide'})}onTabSelect(a){this.props.infoActions.setProjectInfo({selected:a}),('config'===a||'qcloud'===a)&&(this.props.requestProjectAttr(),'qcloud'==a&&j('weapp_toolbar_details_qcloud',this.props.project.appid))}onPannelClick(a){a.stopPropagation(),this.setState({showDropDown:!1})}handleDropdownShow(){this.setState({showDropDown:!0})}onFileSystemClick(a){a.stopPropagation();let b=this.props.project,c=k.getFileSystemDir(b);nw.Shell.openItem(c)}onOpenDirClick(b){b.stopPropagation();let c=this.props.project.projectpath;a.existsSync(c)&&nw.Shell.openItem(c)}onCopyShareLinkClick(a,b){a.stopPropagation();this.props.project||{};const c=nw.Clipboard.get();c.set(b,'text'),this.props.showSuccessTip('\u590D\u5236\u6210\u529F')}async getCodePackageLength(){let a=await l(this.props.project);this.setState({codePackageLength:a})}render(){var a=Math.round;if(!this.state.lazyLoaded)return null;const b=this.props,j=this.state;let l,m=b.project||{},n=m.attr||{},o=n.appImageUrl||m.appShowImageUrl,p=`tab-hd-item ${'setting'===b.selected?'tab-hd-item-active':''}`,q=`tab-hd-item ${'config'===b.selected?'tab-hd-item-active':''}`,r=`tab-hd-item ${'qcloud'===b.selected?'tab-hd-item-active':''}`;m.shareInfo&&m.shareInfo.history&&m.shareInfo.history[0]&&(l=m.shareInfo.history[0]);const s=n.platform&&n.extInfo&&(n.extInfo.appid||n.extInfo.errMsg)||'',t=k.getFileSystemDir(m)||'';let u=m.appid;return m.isGameTourist&&(u='touristappid'),c.createElement('div',{className:e('panel panel-pull-right',{"ui-animate-swipeInLeft":'show'===j.animationType,"ui-animate-swipeOutRight":'hide'===j.animationType}),style:j.show?{}:f.displayNone,onAnimationEnd:()=>{'hide'===j.animationType&&this.setState({show:!1})},onClick:this.onPannelClick.bind(this)},c.createElement('div',{className:'project'},c.createElement('div',{className:'project-hd',style:{userSelect:'initial'}},c.createElement('div',{className:'ui-flex'},c.createElement('div',{className:'project-avatar'},c.createElement('img',{src:o,alt:''})),c.createElement('h3',{className:'project-name'},n.appName)),c.createElement('div',{className:'project-summary'},c.createElement('div',{className:'ui-flex',style:n.platform&&n.platformNickname?{}:f.displayNone},c.createElement('label',null,'\u5E73\u53F0\u540D'),c.createElement('p',{className:'ui-flex-item'},n.platformNickname)),c.createElement('div',{className:'ui-flex',style:s?{}:f.displayNone},c.createElement('label',null,'extAppid'),c.createElement('p',{className:'ui-flex-item'},s)),m.isGameTourist?null:c.createElement('div',{className:'ui-flex'},c.createElement('label',null,'AppID'),c.createElement('p',{className:'ui-flex-item'},u)),c.createElement('div',{className:'ui-flex'},c.createElement('label',null,'\u672C\u5730\u76EE\u5F55'),c.createElement('p',{className:'ui-flex-item',title:m.projectpath},m.projectpath),c.createElement('a',{onClick:this.onOpenDirClick.bind(this)},'\u6253\u5F00')),c.createElement('div',{className:'ui-flex',style:{}},c.createElement('label',null,'\u6587\u4EF6\u7CFB\u7EDF'),c.createElement('p',{className:'ui-flex-item',title:t},t),c.createElement('a',{onClick:this.onFileSystemClick.bind(this)},'\u6253\u5F00')),c.createElement('div',{className:'ui-flex'},c.createElement('label',null,'\u672C\u5730\u4EE3\u7801'),c.createElement('p',{className:'ui-flex-item'},this.state.codePackageLength,' KB')),c.createElement('div',{className:'ui-flex'},c.createElement('label',null,'\u4E0A\u6B21\u9884\u89C8'),c.createElement('p',{className:'ui-flex-item'},0<=this.props.pkgSize.preview?`${a(this.props.pkgSize.preview/1024)} KB（${d(new Date(this.props.pkgSize.lastPreviewTime)).calendar()}）`:'\u65E0')),m.isMiniCode?null:c.createElement('div',{className:'ui-flex'},c.createElement('label',null,'\u4E0A\u6B21\u4E0A\u4F20'),c.createElement('p',{className:'ui-flex-item'},0<=this.props.pkgSize.upload?`${a(this.props.pkgSize.upload/1024)} KB（${d(new Date(this.props.pkgSize.lastUploadTime)).calendar()}）`:'\u65E0')),m.isMiniCode&&m.shareInfo&&m.shareInfo.from&&m.shareInfo.from.codeid?c.createElement('div',{className:'ui-flex'},c.createElement('label',null,'\u6765\u6E90\u94FE\u63A5'),c.createElement('p',{className:'ui-flex-item'},`wechatide://minicode/${m.shareInfo.from.codeid}`),c.createElement('a',{onClick:(a)=>this.onCopyShareLinkClick(a,`wechatide://minicode/${m.shareInfo.from.codeid}`)},'\u590D\u5236')):null,m.isMiniCode?c.createElement('div',{className:'ui-flex'},c.createElement('label',null,'\u4E0A\u6B21\u5206\u4EAB'),c.createElement('p',{className:'ui-flex-item'},l?`wechatide://minicode/${l.codeid}`:'\u65E0'),c.createElement('a',{onClick:(a)=>l&&this.onCopyShareLinkClick(a,`wechatide://minicode/${l.codeid}`)},'\u590D\u5236')):null)),c.createElement('div',{className:'project-bd'},c.createElement('div',{className:'tab'},c.createElement('div',{className:'tab-hd'},c.createElement('div',{className:p,onClick:this.onTabSelect.bind(this,'setting')},'\u9879\u76EE\u8BBE\u7F6E'),c.createElement('div',{className:q,onClick:this.onTabSelect.bind(this,'config')},'\u57DF\u540D\u4FE1\u606F'),m.isMiniCode?null:c.createElement('div',{className:r,onClick:this.onTabSelect.bind(this,'qcloud')},'\u817E\u8BAF\u4E91\u72B6\u6001')),c.createElement('div',{className:'tab-bd'},c.createElement(g,{showDropDown:this.state.showDropDown,onDropdownShow:this.handleDropdownShow.bind(this)}),c.createElement(h,null),c.createElement(i,null))))))}}module.exports=m}(require('lazyload'),require);
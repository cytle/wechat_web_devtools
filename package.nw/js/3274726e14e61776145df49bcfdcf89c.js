;!function(require, directRequire){;"use strict";const tslib_1=require("tslib"),React=require("react"),classNames=require("classnames"),toolbarActions=require('./fc137838572a83604db39acff8e909e0.js'),windowActions=require('./a8c87029da0fa06e986298d447ab0fe2.js'),tools=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js'),Animation=require('./875171e7b864aa58d026d4fa0999fbd1.js'),locales=require('./common/locales/index.js'),simulatorTypeConfig=require('./efd8b4323f89b2a759d044d894e3a4f0.js'),{connect}=require("react-redux"),mapStateToProps=(a)=>({project:a.project.current||{},show:a.window.toolbarConfig&&a.window.toolbarConfig.show,pluginManifests:a.plugin.pluginManifests,config:a.toolbar.config}),mapDispatchToProps=(a)=>({setToolbarConfig:tools.bindActionCreators(toolbarActions.setToolbarConfig,a),setToolbarConfigWnd:tools.bindActionCreators(windowActions.setToolbarConfig,a)});let IconManager=class extends React.Component{constructor(a){super(a),this.onAnimationOut=()=>{this.props.setToolbarConfigWnd({show:!1})},this.state=Object.assign({show:a.show},a.config)}componentWillReceiveProps(a){a.show!==this.props.show&&this.setState({show:a.show}),a.config!==this.props.config&&this.setState(Object.assign({},a.config))}onConfirmClick(){this.setState({show:!1}),this.props.setToolbarConfig({cos:this.state.cos,qcloud:this.state.qcloud,tgit:this.state.tgit,upload:this.state.upload,test:this.state.test,bbs:this.state.bbs,plugin:this.state.plugin})}onIconClick(a){this.setState({[a]:!this.state[a]})}onPluginIconClick(a){this.setState({plugin:Object.assign({},this.state.plugin,{[a]:!(!1!==this.state.plugin[a])})})}getCheckboxState(a){return React.createElement("i",{className:classNames({"ui-icon-checkbox":!a,"ui-icon-checkbox-o":a})})}rendToolbarPluginIcon(){const a=this.props,b=[];for(const c in a.pluginManifests){const d=a.pluginManifests[c];d.toolbar&&b.push(React.createElement("div",{className:"toolbar-item",key:c,onClick:this.onPluginIconClick.bind(this,c)},React.createElement("div",{className:"toolbar-action"},React.createElement("div",{className:"toolbar-button"},React.createElement("i",{style:{background:`url(${d.toolbar_icon}) no-repeat 50% 50%`,display:"inline-block",verticalAlign:"middle",width:12,height:12}})),React.createElement("p",{className:"toolbar-label"},d.name)),React.createElement("label",{className:"ui-checkbox"},this.getCheckboxState(!1!==this.state.plugin[c]))))}return b}render(){const a=this.props,b=a.project.attr||{},c=b.gameApp,d=b.qcloud&&b.qcloud.qcloud_status&&1===b.qcloud.qcloud_status.open_qc_account;let e;const f=this.props.pluginManifests,g=this.props.project.simulatorType;return g===simulatorTypeConfig.wechat?e=!0:f[g]&&f[g].unsupportedFunctionalities&&(e=!f[g].unsupportedFunctionalities.includes("auto-test")),React.createElement(Animation,{show:this.state.show,inClassName:"ui-animate-pull-down ui-dialog",outClassName:"ui-animate-pull-up ui-dialog",onAnimationOut:this.onAnimationOut,style:{width:600,marginLeft:-300}},React.createElement("div",{className:"ui-dialog-hd"},React.createElement("h3",{className:"ui-dialog-title"},locales.config.TOOLBAR_ICON_MANAGER_TITLE)),React.createElement("div",{className:"ui-dialog-bd"},React.createElement("div",{className:"toolbar-item-group"},React.createElement("div",{className:"toolbar-item",onClick:this.onIconClick.bind(this,"upload")},React.createElement("div",{className:"toolbar-action"},React.createElement("div",{className:"toolbar-button"},React.createElement("i",{className:"ui-icon-upload"})),React.createElement("p",{className:"toolbar-label"},locales.config.TOOLBAR_UPLOAD)),React.createElement("label",{className:"ui-checkbox"},this.getCheckboxState(this.state.upload))),e?React.createElement("div",{className:"toolbar-item",style:{display:c?"none":""},onClick:this.onIconClick.bind(this,"test")},React.createElement("div",{className:"toolbar-action"},React.createElement("div",{className:"toolbar-button"},React.createElement("i",{className:"ui-icon-beaker"})),React.createElement("p",{className:"toolbar-label"},locales.config.TOOLBAR_TEST)),React.createElement("label",{className:"ui-checkbox"},this.getCheckboxState(this.state.test))):null,React.createElement("div",{className:"toolbar-item",onClick:this.onIconClick.bind(this,"bbs")},React.createElement("div",{className:"toolbar-action"},React.createElement("div",{className:"toolbar-button"},React.createElement("i",{className:"ui-icon-community"})),React.createElement("p",{className:"toolbar-label"},locales.config.TOOLBAR_BBS)),React.createElement("label",{className:"ui-checkbox"},this.getCheckboxState(this.state.bbs))),d?React.createElement("div",{className:"toolbar-item",onClick:this.onIconClick.bind(this,"qcloud")},React.createElement("div",{className:"toolbar-action"},React.createElement("div",{className:"toolbar-button"},React.createElement("i",{className:"ui-icon-cloud"})),React.createElement("p",{className:"toolbar-label"},locales.config.TOOLBAR_TENCENT_CLOUD)),React.createElement("label",{className:"ui-checkbox"},this.getCheckboxState(this.state.qcloud))):null,React.createElement("div",{className:"toolbar-item",onClick:this.onIconClick.bind(this,"cos")},React.createElement("div",{className:"toolbar-action"},React.createElement("div",{className:"toolbar-button"},React.createElement("i",{className:"ui-icon-material"})),React.createElement("p",{className:"toolbar-label"},locales.config.TOOLBAR_MATERIAL_MANAGEMENT)),React.createElement("label",{className:"ui-checkbox"},this.getCheckboxState(this.state.cos))),this.rendToolbarPluginIcon())),React.createElement("div",{className:"ui-dialog-ft",onClick:this.onConfirmClick.bind(this)},React.createElement("div",{className:"ui-dialog-action"}),React.createElement("div",{className:"ui-dialog-action"},React.createElement("button",{className:"ui-button ui-button-primary"},locales.config.CONFIRM))))}};IconManager=tslib_1.__decorate([locales.mixin],IconManager),module.exports=connect(mapStateToProps,mapDispatchToProps)(IconManager);
;}(require("lazyload"), require);

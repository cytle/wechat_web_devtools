'use strict';!function(require,directRequire){const a=require('react'),b=require('react-dom'),c=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),d=require('./ff946754202ecf377034d29daac7c8d9.js');module.exports=class extends a.Component{constructor(){super(),this.state={}}componentDidMount(){const a=b.findDOMNode(this.container);if(!a)return;let e,f;e=this.webview=document.createElement('webview'),e.setAttribute('partition','persist:devtools'),e.src='about:blank',a.appendChild(e),e.request.onBeforeRequest.addListener((a)=>{if(/^file:\/\//i.test(a.url))return{cancel:!0}},{urls:['<all_urls>']},['blocking']);const g=()=>{e.removeEventListener('loadcommit',g),e.addEventListener('dialog',(a)=>{a.preventDefault();const b=a.messageType,e=a.messageText,f=a.dialog;if('alert'!==b)'prompt'===b&&e===c.GET_MESSAGE_TOKEN&&f.ok(d.getToken());else if(f&&f.ok(),0<=e.indexOf('opennewtab:')){const a=e.replace('opennewtab:','');this.handleNewWindow(a)}})},h=()=>{f.removeEventListener('loadcommit',h),f.showDevTools(!0,e);const a=`${e.getUserAgent()} qclouddebugdevtools port/${global.messageCenterPort}`;e.setUserAgentOverride(a),e.src=`${this.props.qcloud.inspectUrl}`,e.setAttribute('style','position: relative; width: 100%; height: 100%; margin: 0 auto;'),e.addEventListener('loadcommit',g),f.parentNode.removeChild(f)},i=()=>{e.removeEventListener('loadcommit',i),f=document.createElement('webview'),f.style.visibility='hidden',f.src='about:blank',a.parentNode.insertBefore(f,a),f.addEventListener('loadcommit',h)};e.addEventListener('loadcommit',i)}handleOuterClick(){document.activeElement.blur()}handleNewWindow(a){0===a.indexOf(`http://127.0.0.1:${global.proxyPort}/appservice/appservice`)||`http://127.0.0.1:${global.proxyPort}/favicon.ico`===a||0===a.indexOf('ws://')||0===a.indexOf('wss://')||a&&('https://developers.google.com/web/tools/chrome-devtools/'===a?a='https://developers.weixin.qq.com/miniprogram/dev/index.html':'https://developers.google.com/web/updates/2017/05/devtools-release-notes'===a&&(a='https://developers.weixin.qq.com/miniprogram/dev/devtools/uplog.html'),nw.Shell.openExternal(a))}render(){return a.createElement('div',{onClick:this.handleOuterClick.bind(this),className:'container'},a.createElement('div',{className:'debugger',ref:(a)=>this.container=a}))}}}(require('lazyload'),require);
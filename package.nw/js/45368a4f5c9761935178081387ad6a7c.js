'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};!function(require,directRequire){async function a(a,b,c=''){const d={pages:[],page:{}};if(!b)return d;for(const e in b){const f=b[e],g=await i.getPluginJSON(a,{version:f.version,pluginId:f.provider});if(g.pages)for(const a in g.pages)d.pages.push(`${c}${g.pages[a]}`);if(g.page)for(const a in g.page)d.page[`${c}${a}`]=g.page[a]}return d}const b=require('path'),c=require('./1dea83a77e99a7c94f6b6f01f5c175b0.js'),d=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),e=require('./37be435102276ea9cf47609ff6535cd4.js'),f=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),g=require('./cc2c2970ff81ae4a83123e81ee123da2.js'),h=require('./3bfffbe88b3d923921f851c0697974fe.js'),i=require('./b6d8659542036f6a35f417e0693e56db.js'),j={USER_DATA_PATH:e.USER_DATA_PATH};module.exports=async function(e){const k=await c(e);let i=e.attr&&e.attr.setting||{};const l=e.attr&&e.attr.appType||0;i=_extends({},d.setting,i);let m=_extends({},k,{appType:l,wxAppInfo:{maxRequestConcurrent:i.MaxRequestConcurrent,maxUploadConcurrent:i.MaxUploadConcurrent,maxDownloadConcurrent:i.MaxDownloadConcurrent,maxWorkerConcurrent:i.MaxWorkerConcurrent}});if(0==Object.keys(m.plugins).length&&delete m.plugins,k.mainPlugins){const b=await a(e,k.mainPlugins);m.pages=m.pages.concat(b.pages),m.page=_extends({},m.page,b.page)}if(k.subPackages)for(let c=0;c<k.subPackages.length;c++){const d=k.subPackages[c],f=d.pages.map((a)=>b.posix.join(d.root,a));if(m.pages=m.pages.concat(f),d.plugins){const b=await a(e,d.plugins,d.root);m.pages=m.pages.concat(b.pages),m.page=_extends({},m.page,b.page)}}if(k.page=m.page,m.plugins){let a,b=!1,c=!1;if(e.pluginInfo&&0<e.pluginInfo.length){const a={};for(const b in m.plugins)a[m.plugins[b].provider]=m.plugins[b].version;for(const d of e.pluginInfo){if(!d||!d.current||!d.current.innerVersion){b=!0;break}if(d.current.version!==a[d.appid]){c=!0;break}}}else b=!0;if(b||c)try{const b=await h.getLatestPluginInfo();a=b.map((a)=>({plugin_id:a.appid,inner_version:a.current.innerVersion})),setTimeout(()=>{f.dispatch(g.setPluginInfo(b))})}catch(a){}else a=e.pluginInfo.map((a)=>({plugin_id:a.appid,inner_version:a.current.innerVersion}));for(const b in m.plugins)m.plugins[b]&&'dev'===m.plugins[b].version&&(a||(a=[]),a.push({plugin_id:m.plugins[b].provider,inner_version:0}));m.appContactInfo={call_plugin_info:a}}const n=f.getState(),o=n.simulator.appLaunchInfo||{path:m.pages[0],scene:d.SCENE_DEFAULT,query:{}};return m.accountInfo={appId:e.appid,nickname:n.user.nickName,icon:e.appShowImageUrl},m=_extends({},m,{platform:'devtools',appLaunchInfo:o,env:j}),m}}(require('lazyload'),require);
'use strict';!function(require,directRequire){function a(...a){return function(){this.enabled&&g[a[0]].apply(this,a.slice(1))}}function b(){return[{label:m.MENU_TITLE_APP,submenu:[{label:m.MENU_SWITCH_ACCOUNT,click:a('switchAccount'),shouldEnabled:'!inLoginWindow'},{type:'separator'},{label:m.MENU_ABOUT,click:a('about')},{label:m.MENU_CHECK_UPDATE,click:a('checkUpdate')},{label:m.MENU_BBS,click:a('BBS')},{label:m.MENU_DOC,click:a('Doc')},{type:'separator'},{label:m.MENU_INSPECT,submenu:[{label:m.MENU_INSPECT_APP,click:a('inspectApp')},{label:m.MENU_INSPECT_EDITOR,click:a('inspectEditor'),shouldEnabled:'isMiniProgramDev'}]},{type:'separator'},{label:m.MENU_SWITCH_DEV_MODE,submenu:[{type:'checkbox',label:m.MENU_WEB_DEV,click:a('switchToWebDev'),shouldChecked:'isWebDev'},{type:'checkbox',label:m.MENU_MINI_PROGRAM_DEV,click:a('switchToMiniProgramDev'),shouldChecked:'isMiniProgramDev'}],shouldEnabled:'isMiniProgramDev || isWebDev'},{label:m.MENU_EXIT,key:'q',modifiers:o,click:a('exit')}]},{label:m.MENU_TITLE_PROJECT,submenu:[{label:m.MENU_NEW_PROJECT,key:'n',modifiers:'shift+'+o,click:a('newProject'),shouldEnabled:'(inSelectProjectWindow || isMiniProgramDev) && !inLoginWindow'},{label:m.MENU_OPEN_RECENT_PROJECT,submenu:[],shouldEnabled:'isMiniProgramDev && !inLoginWindow'},{type:'separator'},{label:m.MENU_PROJECTS,click:a('viewProjects'),shouldEnabled:'isMiniProgramDev && !inLoginWindow'},{type:'separator'},{label:m.MENU_CLOSE_PROJECT,key:'w',modifiers:'shift+'+o,click:a('closeProject'),shouldEnabled:'isMiniProgramDev && !inLoginWindow'}]},{label:m.MENU_TITLE_FILE,submenu:[{label:m.MENU_NEW_FILE,key:'n',modifiers:o,click:a('newFile'),shouldEnabled:'isMiniProgramDev && inMainWindow'},{label:m.MENU_SAVE,key:'s',modifiers:o,click:a('save'),shouldEnabled:'isMiniProgramDev && inMainWindow'},{label:m.MENU_SAVE_ALL,key:'s',modifiers:'shift+'+o,click:a('saveAll'),shouldEnabled:'isMiniProgramDev && inMainWindow'},{type:'separator'},{label:m.MENU_CLOSE_FILE,key:'w',modifiers:o,click:a('closeFile'),shouldEnabled:'isMiniProgramDev && inMainWindow'}]},{label:m.MENU_TITLE_EDIT,submenu:[{label:m.MENU_UNDO,key:'z',modifiers:o,click:a('undo')},{label:m.MENU_REDO,key:'z',modifiers:'shift+'+o,click:a('redo')},{type:'separator'},{label:m.MENU_COPY,key:'c',modifiers:o,click:a('copy')},{label:m.MENU_CUT,key:'x',modifiers:o,click:a('cut')},{label:m.MENU_PASTE,key:'v',modifiers:o,click:a('paste')},{type:'separator'},{label:m.MENU_UNINDENT,key:'[',modifiers:o,click:a('unindent'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{label:m.MENU_INDENT,key:']',modifiers:o,click:a('indent'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{label:m.MENU_FORMAT_CODE,key:'f',modifiers:'shift+alt',click:a('format'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{type:'separator'},{label:m.MENU_MOVE_LINES_UP,key:'up',modifiers:'alt',click:a('moveLineUp'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{label:m.MENU_MOVE_LINES_DOWN,key:'down',modifiers:'alt',click:a('moveLineDown'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{label:m.MENU_COPY_LINES_UP,key:'up',modifiers:'shift+alt',click:a('copyLineUp'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{label:m.MENU_COPY_LINES_DOWN,key:'down',modifiers:'shift+alt',click:a('copyLineDown'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{type:'separator'},{label:m.MENU_GOTO_FILE,key:'p',modifiers:o,click:a('gotoFile'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{label:m.MENU_GOTO_RECENT,key:'e',modifiers:o,click:a('gotoRecentFile'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{label:m.MENU_GOTO_PREVIOUS_EDITOR,key:'left',modifiers:'alt+'+o,click:a('gotoPreviousEditor'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{label:m.MENU_GOTO_NEXT_EDITOR,key:'right',modifiers:'alt+'+o,click:a('gotoNextEditor'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{type:'separator'},{label:m.MENU_FIND,key:'f',modifiers:o,click:a('find'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{label:m.MENU_FIND_IN_FILES,key:'f',modifiers:`shift+${o}`,click:a('findInFiles'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused'},{label:m.MENU_REPLACE,key:'r',modifiers:o,click:a('replace'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isDevtoolsFocused && isEditorFocused'}]},{label:m.MENU_TITLE_TOOLS,submenu:[{label:m.MENU_BUILD,key:'b',modifiers:o,click:a('rebuild'),shouldEnabled:'isMiniProgramDev && inMainWindow'},{label:m.MENU_REFRESH,key:'r',modifiers:o,click:a('rebuild'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isEditorFocused'},{label:m.MENU_BUILD_SETTINGS,click:a('openBuildSettings'),shouldEnabled:'isMiniProgramDev && inMainWindow',submenu:[{type:'checkbox',label:m.MENU_NORMAL_BUILD,checked:!0,click:a('customRebuild',-1)},{type:'separator'},{label:m.MENU_NEW_CUSTOM_BUILD}]},{type:'separator'},{label:m.MENU_SIMULATOR_TOGGLE_FOREGROUND_BACKGROUND,click:a('toggleForegroundBackgroundStatus'),shouldEnabled:'isMiniProgramDev && inMainWindow'},{type:'separator'},{label:m.MENU_CLEAR_CACHE,shouldEnabled:'isMiniProgramDev && inMainWindow',submenu:[{label:m.MENU_CLEAR_FILE_CACHE,click:a('clearFileCache'),shouldEnabled:'isMiniProgramDev && inMainWindow'},{label:m.MENU_CLEAR_STORAGE_CACHE,click:a('clearStorageCache'),shouldEnabled:'isMiniProgramDev && inMainWindow'},{label:m.MENU_CLEAR_AUTH_CACHE,click:a('clearAuthCache'),shouldEnabled:'isMiniProgramDev && inMainWindow'}]},{type:'separator'},{label:m.MENU_PREVIEW,key:'p',modifiers:'shift+'+o,click:a('preview'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isTourist && userbanded'},{label:m.MENU_UPLOAD,key:'u',modifiers:'shift+'+o,click:a('upload'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isTourist && userbanded'},{label:m.MENU_CUSTOM_ANALYSIS,click:a('customAnalysis'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isTourist && userbanded'},{label:m.MENU_AUTO_TEST,click:a('autoTest'),shouldEnabled:'isMiniProgramDev && inMainWindow && !isTourist && userbanded'},{label:m.MENU_PROJECT_DETAILS,click:a('openProjectDetailInformation'),shouldEnabled:'isMiniProgramDev && inMainWindow'}]},{label:m.MENU_TITLE_WINDOW,submenu:[{type:'checkbox',label:m.MENU_TOOLBAR,key:'F8',click:a('toggleToolbar'),shouldEnabled:'isMiniProgramDev && inMainWindow',shouldChecked:'isToolbarVisible'},{type:'checkbox',label:m.MENU_SIMULATOR,key:'F9',click:a('toggleSimulatorWindow'),shouldEnabled:'isMiniProgramDev && inMainWindow',shouldChecked:'isSimulatorVisible'},{type:'checkbox',label:m.MENU_EDITOR,key:'F10',click:a('toggleEditorWindow'),shouldEnabled:'isMiniProgramDev && inMainWindow',shouldChecked:'isEditorVisible'},{type:'checkbox',label:m.MENU_FILE_TREE,key:'F11',click:a('toggleFileTree'),shouldEnabled:'isMiniProgramDev && inMainWindow && isEditorVisible',shouldChecked:'isFileTreeVisible'},{type:'checkbox',label:m.MENU_DEVTOOLS,key:'F12',click:a('toggleDebugWindow'),shouldEnabled:'isMiniProgramDev && inMainWindow',shouldChecked:'isDevtoolsVisible'}]},{label:m.MENU_TITLE_SETTINGS,submenu:[{label:m.MENU_APPEARANCE_SETTINGS,key:',',modifiers:o,click:a('openAppearanceSettings'),shouldEnabled:'isMiniProgramDev && inMainWindow'},{label:m.MENU_EDIT_SETTINGS,click:a('openEditSettings'),shouldEnabled:'isMiniProgramDev && inMainWindow'},{label:m.MENU_PROXY_SETTINGS,click:a('openProxySettings')},{label:m.MENU_NOTIFICATION_SETTINGS,click:a('openNotificationSettings'),shouldEnabled:'!inLoginWindow'},{type:'separator'},{label:m.MENU_PROJECT_SETTINGS,click:a('openProjectSettings'),shouldEnabled:'isMiniProgramDev && inMainWindow'}]}]}function c(){const a=b(),c=a[0];return a.shift(),a.push(c),a[2].submenu=a[2].submenu.slice(7),a}function d(a,b){for(const c of b)if(c.submenu){const b=new nw.Menu;d(b,c.submenu);const e=new nw.MenuItem({label:c.label,submenu:b});e.enabled=!c.shouldEnabled||i.evaluate(c.shouldEnabled),a.append(e),c.instance=e}else{const b={};for(const a in c)b[a]=c[a];const d=new nw.MenuItem(b);d.enabled=!b.shouldEnabled||i.evaluate(b.shouldEnabled),a.append(d),c.instance=d}}function e(a){let b=new nw.Menu({type:'menubar'});b.createMacBuiltin('temp',{hideEdit:!1,hideWindow:!0}),b.items[1].label=m.MENU_TITLE_EDIT;let c=b.items[1].submenu.items[0];b.items[1].submenu.removeAt(0),c.label=m.MENU_UNDO;let d=b.items[1].submenu.items[0];b.items[1].submenu.removeAt(0),d.label=m.MENU_REDO;let e=b.items[1].submenu.items[2];b.items[1].submenu.removeAt(2),e.label=m.MENU_COPY;let f=b.items[1].submenu.items[1];b.items[1].submenu.removeAt(1),f.label=m.MENU_CUT;let g=b.items[1].submenu.items[1];b.items[1].submenu.removeAt(1),g.label=m.MENU_PASTE;const h=a.items[3].submenu;h.removeAt(0),h.insert(c,0),h.removeAt(1),h.insert(d,1),h.removeAt(3),h.insert(e,3),h.removeAt(4),h.insert(f,4),h.removeAt(5),h.insert(g,5)}const f=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),g=require('./25d0beb4120ce2acafb4e03b95444fda.js'),h=require('./common/locales/index.js'),i=require('./41f4eba9fb17703b7d61eca8b05aa076.js'),j=require('./84858de8a097c9cf84ff2c2e3d86e2a9.js'),k=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),l=require('./72653d4b93cdd7443296229431a7aa9a.js'),m=h.config,n='darwin'===process.platform,o=n?'cmd':'ctrl',p=new Map,q=(a)=>{return a[1].submenu[1].instance},r=(a)=>{return a[4].submenu[2].instance},s=(a)=>{return a[0].submenu[1].instance},t=(a)=>{return a[3].submenu[2].instance},u=(a)=>`${a}`,v=(b,c,d)=>{return new nw.MenuItem({label:u(c,d),click:a('openProject',b)})};module.exports={set:()=>{},init:(a)=>{a||(a=global.Win);const f=new nw.Menu({type:'menubar'}),g=n?b():c();p.set(a,{menu:f,structure:g}),d(f,g),n&&e(f),a.menu=f},update:(b)=>{b||(b=global.Win);const c=p.get(b);if(!c)return;const d=c.menu,e=c.structure,f=(a)=>{for(const b of a){if(b.instance){if(b.shouldEnabled){const a=b.instance.enabled,c=i.evaluate(b.shouldEnabled);a!==c&&(b.instance.enabled=c)}if(b.shouldChecked){const a=b.instance.checked,c=i.evaluate(b.shouldChecked);a!==c&&(b.instance.checked=c)}}b.submenu&&(b.instance?b.instance.enabled&&f(b.submenu):f(b.submenu))}};f(e);try{const b=n?q(e):s(e);if(b){const c=b.submenu,d=j.projectList,e=j.recentProjects,f=e.map((a)=>d[a]);for(let b=0,d=f.length;b<d;b++){const d=f[b],e=c.items[b],g=decodeURIComponent(d.projectname);if(!e)c.append(v(d.projectid,g,d.projectpath));else{const b=u(g,d.projectpath);e.label!==b&&(e.label=b,e.click=a('openProject',d.projectid,g))}}}}catch(a){l.error(`update recent projects menu catch error ${a}`)}try{const b=n?r(e):t(e),c=k.getState(),d=c.project.current;if(d&&b){const c=b.submenu,e=d.condiction[d.compileType],f=e.list;for(;c.items[0];)c.removeAt(0);c.append(new nw.MenuItem({type:'checkbox',label:m.MENU_NORMAL_BUILD,checked:-1===e.current,click:a('customRebuild',-1)})),c.append(new nw.MenuItem({type:'separator'}));for(let b=0,d=f.length;b<d;b++){const d=f[b];c.append(new nw.MenuItem({type:'checkbox',label:d.name,checked:e.current==b,click:a('customRebuild',b)}))}0<f.length&&c.append(new nw.MenuItem({type:'separator'})),c.append(new nw.MenuItem({label:m.MENU_NEW_CUSTOM_BUILD,click:a('createCustomCompile',d.compileType)}))}}catch(a){l.error(`update compile condiction menu catch error ${a}`)}}}}(require('lazyload'),require);
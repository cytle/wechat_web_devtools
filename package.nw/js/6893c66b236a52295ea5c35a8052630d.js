;!function(require, directRequire){;"use strict";const React=require("react"),{connect}=require("react-redux"),classNames=require("classnames"),simulatorActions=require('./ba23d8b47b1f4ea08b9fd49939b9443f.js'),appserviceMessager=require('./a1dd553cc059d528bb0ef56afed53968.js'),weappConfig=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),color=require('./5b7e808cbfe14a62c21959fb1771749d.js'),stateHelper=require('./54bd189bb6081afa877cfd37a0dbec56.js'),{default_backgroundColor,default_tabBarBorderBlackColor,default_tabBarBorderWhiteColor}=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),tools=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js'),mapStateToProps=(a)=>{const b=a.simulator.webviewInfos[a.simulator.currentWebviewID]||{},c=a.toolbar.deviceInfo,d=stateHelper.isCustomTabbar(a),{color:e,selectedColor:f,backgroundColor:g}=a.simulator.tabbar;return Object.assign({},a.simulator.tabbar,{color:transColor(e,"#000"),selectedColor:transColor(f,"#1AAD19"),backgroundColor:transColor(g,default_backgroundColor),height:c.tabbarHeight,statusbarHeight:c.statusbarHeight,navigationbarHeight:c.navigationbarHeight,tabIndex:b.tabbarIndex,baseURL:`http://127.0.0.1:${global.proxyPort}/__pageframe__/`,currentWebviewID:a.simulator.currentWebviewID,appRoute:a.simulator.appRoute,custom:d})};function transColor(a,b){try{const c=color.fromHex(a||b);return c.toHex()}catch(a){return b}}const mapDispatchToProps=(a)=>({switchTab:tools.bindActionCreators(simulatorActions.switchTab,a)});class Tabbar extends React.Component{constructor(a){super(a),this.clickTab=(a)=>{const b=a.currentTarget,c=b.dataset,d=c.name.replace(/\.html$/,""),e=parseInt(c.index,10),f=this.props.list[e];this.clickInfo={pagePath:d,index:e,text:f.text,iconPath:f.iconPath,selectedIconPath:f.selectedIconPath},this.props.tabIndex===e?this.triggerOnEvent():this.props.switchTab(d,e)},this.state={animationType:"none",show:!0},this.clickInfo=void 0}componentWillReceiveProps(a){a.show!==this.props.show&&(a.animation?this.setState({animationType:a.show?"show":"hide"}):this.setState({animationType:"none",show:a.show})),a.appRoute!==this.props.appRoute&&"ready"===a.appRoute.status&&("appLaunch"===a.appRoute.openType&&(this.clickInfo=void 0),"switchTab"===a.appRoute.openType&&setTimeout(()=>{this.triggerOnEvent()}))}componentWillUnmount(){}triggerOnEvent(){this.clickInfo&&(appserviceMessager.triggerOnEvent({eventName:"onTabItemTap",data:this.clickInfo,webviewID:parseInt(this.props.currentWebviewID,10)}),this.clickInfo=void 0)}renderTop(){const a=this.props;let{tabIndex:b}=this.props;this.state.show||(b=-1);const c=a.position||"bottom",d=a.list||[],e={};e.backgroundColor=a.backgroundColor,e.borderColor="white"===a.borderStyle?default_tabBarBorderWhiteColor:default_tabBarBorderBlackColor,e.color=a.color,e.zIndex=5,e.display=-1===b?"none":"",e.height=weappConfig.default_ios_tabbar_height,"hide"===this.state.animationType?(e.transition="all linear 0.2s",e.transform=`translateY(-${a.height}px)`):"show"===this.state.animationType&&(e.transition="all linear 0.2s");const f="white"===a.borderStyle?default_tabBarBorderWhiteColor:default_tabBarBorderBlackColor,g=a.selectedColor?a.selectedColor:a.color,h=d.map((c,d)=>{const e=d===b&&a.selectedColor?{color:a.selectedColor}:{color:a.color};let f=(d===b?c.selectedIconPath:c.iconPath)||"";return f=/^(\\|\/)/.test(f)?f.slice(1):f,f=f?`${this.props.baseURL}${f}?r=${Math.random()}`:"",React.createElement("div",{className:classNames("weui-navbar__item",{"weui-bar__item_on":d===b}),style:e,"data-name":c.pagePath,"data-index":d,onClick:this.clickTab,key:d},c.text,React.createElement("div",{className:"weui-navbar__item-border",style:{borderColor:g}}))});return React.createElement("div",{className:"weui-navbar",style:e,onAnimationEnd:this.onAnimationEnd.bind(this)},h)}onAnimationEnd(){this.setState({animationType:"none",show:this.props.show})}renderBottom(){const a=this.props;let b=a.tabIndex;this.state.show||(b=-1);const c=a.position||"bottom",d=a.list||[],e={};e.backgroundColor=a.backgroundColor,e.borderColor="white"===a.borderStyle?default_tabBarBorderWhiteColor:default_tabBarBorderBlackColor,e.color=a.color,e.position="absolute",e.zIndex=5,e.display=0<=b?"":"none",e.height=a.height,"hide"===this.state.animationType?(e.transition="all linear 0.2s",e.transform=`translateY(${a.height}px)`):"show"===this.state.animationType&&(e.transition="all linear 0.2s");const f={backgroundColor:"white"===a.borderStyle?default_tabBarBorderWhiteColor:default_tabBarBorderBlackColor},g=d.map((c,d)=>{const e=d===b&&a.selectedColor?{color:a.selectedColor}:{color:a.color};let f=(d===b?c.selectedIconPath:c.iconPath)||"";f=/^(\\|\/)/.test(f)?f.slice(1):f,f=f?`${this.props.baseURL}${f}?r=${Math.random()}`:c.iconData?d===b?`data:image/png;base64,${c.selectedIconData}`:`data:image/png;base64,${c.iconData}`:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";const g={position:"absolute",top:0,left:16};return c.badge&&"none"!==c.badge.type||(g.display="none"),c.badge&&c.badge.backgroundColor&&(g.backgroundColor=c.badge.backgroundColor),React.createElement("a",{className:`weui-tabbar__item ${d===b?"weui-tabbar__item_on":""}`,"data-index":d,"data-name":c.pagePath,onClick:this.clickTab,key:d},f&&!c.badge?React.createElement("img",{src:f,className:"weui-tabbar__icon"}):null,f&&c.badge?React.createElement("span",{style:{display:"inline-block",position:"relative"}},React.createElement("img",{src:f,className:"weui-tabbar__icon"}),React.createElement("span",{className:classNames("weui-badge",{"weui-badge_dot":c.badge&&"redDot"===c.badge.type}),style:g},c.badge&&"text"===c.badge.type&&c.badge.text)):null,React.createElement("p",{className:"weui-tabbar__label",style:e},c.text))});return React.createElement("div",{className:"weui-tabbar",style:e,onAnimationEnd:this.onAnimationEnd.bind(this)},React.createElement("div",{className:"weui-tabbar-border",style:f}),g)}render(){if(this.props.custom)return null;const a=this.props.position;return"top"===a?this.renderTop():this.renderBottom()}}module.exports=connect(mapStateToProps,mapDispatchToProps)(Tabbar);
;}(require("lazyload"), require);

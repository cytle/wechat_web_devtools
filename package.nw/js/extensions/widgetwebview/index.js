!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(a,o,function(t){return e[t]}.bind(null,o));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=220)}({21:function(e){function t(e){i&&i.readyState===a.OPEN?i.send(JSON.stringify(e)):f.push(e)}var n=window.navigator||window.__global.navigator,a=window.WebSocket||window.__global.WebSocket,o=window.prompt||window.__global.prompt,r=n.userAgent.match(/port\/(\d*)/),l=r?parseInt(r[1]):9974,i=null,s=`ws://127.0.0.1:${l}`,c=null,d=[],f=[],u=0,p=10;const h="GET_MESSAGE_TOKEN";e.exports={connect:function e(n){if(!(u++>=p)){c=n||c;var r=o(h);(i=new a(s,`${c}#${r}#`)).onopen=function(){let e=[].concat(f);f=[],e.forEach(e=>{t(e)})},i.onclose=function(){i=null,setTimeout(()=>{e(n)},1e4)},i.onmessage=function(e){try{!function(e){d.forEach(t=>{try{t.call(this,e)}catch(e){console.error(e)}})}(JSON.parse(e.data))}catch(e){}}}},send:t,registerCallback:e=>{d.push(e)},getWs:()=>i}},220:function(e,t,n){const a=n(221),o=n(222);a.registerCallback(e=>{let{command:t,data:n}=e;"SET_CANVAS"===t?o.setCanvas(n):"DRAW_CANVAS"==t&&o.drawCanvas(n)})},221:function(e,t,n){function a(){o.connect("WIDGET"),document.getElementById("myCanvas").addEventListener("click",function(e){console.error(e),o.send({command:"ON_CANVAS_TAP",data:{x:e.pageX,y:e.pageY}})})}const o=n(21);navigator.userAgent,"complete"==document.readyState?a():window.addEventListener("load",()=>{a()}),e.exports={send:o.send,registerCallback:o.registerCallback}},222:function(e){const t=e=>{var t=e.slice(0);return t[3]/=255,`rgba(${t.join(",")})`};let n={};const a=function(e,a=!1){if(!e)return;const o=document.getElementById("myCanvas"),r=o.getContext("2d");!1===a&&(r.fillStyle="#000000",r.strokeStyle="#000000",r.shadowColor="#000000",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0,r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,o.width,o.height)),e.forEach(function(e){var a=e.method,o=e.data;if(/^set/.test(a)){var l=a[3].toLowerCase()+a.slice(4),i=void 0;if("fillStyle"===l||"strokeStyle"===l){if("normal"===o[0])i=t(o[1]);else if("linear"===o[0]){i=r.createLinearGradient.apply(r,o[1]);o[2].forEach(function(e){var n=e[0],a=t(e[1]);i.addColorStop(n,a)})}else if("radial"===o[0]){var s=o[1][0],c=o[1][1],d=o[1][2];i=r.createRadialGradient.apply(r,[s,c,0,s,c,d]);o[2].forEach(function(e){var n=e[0],a=t(e[1]);i.addColorStop(n,a)})}r[l]=i}else if("globalAlpha"===l)r[l]=o[0]/255;else if("shadow"===l){var f=["shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor"];o.forEach(function(e,n){r[f[n]]="shadowColor"===f[n]?t(e):e})}else"fontSize"===l?r.font=r.font.replace(/\d+\.?\d*px/,o[0]+"px"):"textBaseline"===l?("normal"===o[0]&&(o[0]="alphabetic"),r[l]=o[0]):r[l]=o[0]}else if("fillPath"===a||"strokePath"===a)a=a.replace(/Path/,""),r.beginPath(),o.forEach(function(e){r[e.method].apply(r,e.data)}),r[a]();else if("fillText"===a)r.fillText.apply(r,o);else if("drawImage"===a){let[e,...t]=o;n=n||{},e=0==(e=e.replace("wxfile://","http://wxfile.open.weixin.qq.com/")).indexOf("/")||0==e.indexOf("\\")?`.${e}`:e,n[e]?n[e].ready?r.drawImage.apply(r,[n[e],...t]):n[e].queue.push(t):(n[e]=new Image,n[e].src=e,n[e].queue=[],n[e].onload=(()=>{n[e].ready=!0,r.drawImage.apply(r,[n[e],...t]),n[e].queue.forEach(t=>{r.drawImage.apply(r,[n[e],...t])}),n[e].queue=[]}))}else r[a].apply(r,o)})};e.exports={drawCanvas:function(e){let t=e.args,{actions:n,reserve:o}=t;a(n,o)},setCanvas:function(e){let t=document.getElementById("myCanvas");e.width&&t.setAttribute("width",e.width),e.height&&t.setAttribute("height",e.height),e.style&&t.setAttribute("style",e.style)}}}});
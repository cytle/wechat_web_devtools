!function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var r in e)t.d(n,r,function(t){return e[t]}.bind(null,r));return n},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=202)}({20:function(e){function t(e){i&&i.readyState===n.OPEN?i.send(JSON.stringify(e)):d.push(e)}var o=window.navigator||window.__global.navigator,n=window.WebSocket||window.__global.WebSocket,r=window.prompt||window.__global.prompt,s=o.userAgent.match(/port\/(\d*)/),i=null,a=`ws://127.0.0.1:${s?parseInt(s[1]):9974}`,c=null,l=[],d=[];const u="GET_MESSAGE_TOKEN";e.exports={connect:function e(o){c=o||c;var s=r(u);(i=new n(a,`${c}#${s}#`)).onopen=function(){let e=[].concat(d);d=[],e.forEach(e=>{t(e)})},i.onclose=function(){i=null,setTimeout(()=>{e(o)},100)},i.onmessage=function(e){try{!function(e){l.forEach(t=>{try{t.call(this,e)}catch(t){console.error(t)}})}(JSON.parse(e.data))}catch(e){}}},send:t,registerCallback:e=>{l.push(e)},getWs:()=>i}},202:function(e,t,o){o(29);const n=o(203),r=o(206),s=o(214),i=o(215),a=o(216);-1!==window.__global.navigator.userAgent.indexOf("game")||a(),window.__global.getNewWeixinJSBridge=(e=>{const{invoke:t}=r(e),{publish:o}=s(e),{subscribe:a,triggerSubscribeEvent:c}=i(e),{on:l,triggerOnEvent:d}=n(e);return{invoke:t,publish:o,subscribe:a,on:l,get __triggerOnEvent(){return d},get __triggerSubscribeEvent(){return c}}}),window.WeixinJSBridge=window.__global.WeixinJSBridge=window.__global.getNewWeixinJSBridge("global"),window.__global.WeixinJSBridgeMap={__globalBridge:window.WeixinJSBridge},__devtoolsConfig.online&&__devtoolsConfig.autoTest&&setInterval(()=>{console.clear()},1e4);try{var c=new window.__global.XMLHttpRequest;c.responseType="text",c.open("GET",`http://${window.location.host}/calibration/${Date.now()}`,!0),c.send()}catch(t){}},203:function(e,t,o){e.exports=function(){function e(e,t,o){let n=r[e];"function"==typeof n&&n(t,o)}const t=o(33),n=o(34),r={};return o(35).on("triggerOnEvent",function(t,o,n){e(t,o,n)}),window.DeviceOrientation=function(t,o,n){e("onAccelerometerChange",{x:t,y:o,z:n})},n.registerCallback(t=>{let{command:o,data:n,webviewID:r}=t;"APPSERVICE_ON_EVENT"===o&&e(n.eventName,n.data,r)}),{on:function(e,o){t.debugLog(`${new Date} WeixinJSBridge on ${e}`,arguments),t.debugInfo({type:"on",eventName:e,data:arguments,timesmap:new Date}),o&&(r[e]=o)},triggerOnEvent:e}}},204:function(e,t,o){const n=o(34),r=()=>void n.send({command:"SYSTEM",data:{api:"build"}});Object.defineProperty(window,"build",{get:()=>(r(),r)});const s=()=>void n.send({command:"SYSTEM",data:{api:"preview"}});Object.defineProperty(window,"preview",{get:()=>(console.log("loading..."),s(),s)});const i=()=>void n.send({command:"SYSTEM",data:{api:"upload"}});Object.defineProperty(window,"upload",{get:()=>(i(),i)}),window.where={am:{}},Object.defineProperty(window.where.am,"i",{get(){console.log("wait a second, I'll check"),setTimeout(()=>{try{wx.getLocation({success:e=>{console.log(`${e.longitude}° ${e.latitude}°`)}})}catch(e){}},1e3)}})},205:function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function r(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,s,i,a,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(r(s=this._events[e]))return!1;if(o(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),s.apply(this,a)}else if(n(s))for(a=Array.prototype.slice.call(arguments,1),i=(l=s.slice()).length,c=0;c<i;c++)l[c].apply(this,a);return!0},t.prototype.addListener=function(e,s){var i;if(!o(s))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(s.listener)?s.listener:s),this._events[e]?n(this._events[e])?this._events[e].push(s):this._events[e]=[this._events[e],s]:this._events[e]=s,n(this._events[e])&&!this._events[e].warned&&((i=r(this._maxListeners)?t.defaultMaxListeners:this._maxListeners)&&0<i&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},t.prototype.removeListener=function(e,t){var r,s,i,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(r=this._events[e]).length,s=-1,r===t||o(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(r)){for(a=i;0<a--;)if(r[a]===t||r[a].listener&&r[a].listener===t){s=a;break}if(0>s)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(o(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){return this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}},206:function(e,t,o){e.exports=function(){function e(e){if(e&&e.__cover){for(let t in e.__cover)"base64"==t&&(e[e.__cover[t]]=d(e.base64),delete e.base64);delete e.__cover}}const t=o(33),n=o(46),r=(o(35),o(34)),s=o(47),i=o(207),a=o(211),c=o(212),l=o(213),{base64ToArrayBuffer:d,arrayBufferToBase64:u}=o(33),{isSyncSDK:g,needTransArgsBase64Api:f}=o(29);let p={},w=1;return r.registerCallback(t=>{let{command:o,data:n}=t;if("APPSERVICE_INVOKE_CALLBACK"===o){let t=n.callbackID,o=p[t];e(n.res),"function"==typeof o&&o(n.res),delete p[t]}}),{invoke:function(o,d,h){if(f[o])for(let e in d)d[e]instanceof ArrayBuffer&&(d[e]=u(d[e]));if(t.debugLog(`${new Date} WeixinJSBridge invoke ${o}`,arguments),t.debugInfo({type:"invoke",eventName:o,data:arguments,timesmap:new Date}),a[o])for(let e in d)a[o].is(d[e])&&(d[e]=a[o].trans(d,d[e]));if(c[o]&&c[o](d),n.check.apply(this,arguments))return;let _=g(o),v=function(){"function"==typeof h&&(_?h.apply(h,arguments):setTimeout(()=>{h.apply(h,arguments)},0))};if((!s[o]||s[o].apply(this,arguments))&&(!l[o]||(d=l[o].apply(this,arguments))))if(i[o])i[o](o,d,v);else{let t=w++;if(_){let n={command:"APPSERVICE_INVOKE",data:{api:o,args:d,callbackID:t}},r=`____sdk____${JSON.stringify(n)}`,s=window.__global.prompt(r);e(s=JSON.parse(s)),delete s.to,v(s)}else p[t]=v,r.send({command:"APPSERVICE_INVOKE",data:{api:o,args:d,callbackID:t}})}}}}},207:function(e,t,o){const n=o(208),r=o(209),s=o(210);e.exports=Object.assign({},n,r,s)},208:function(e,t,o){function n(e,t){let{origin:o,fullPath:n,tls:r}=e;console.group(`${new Date} wx.request 错误`),console.error(`${o} 对应的服务器 TLS 为 ${r} ，小程序要求的 TLS 版本必须大于等于 1.2 。控制台输入 showRequestInfo() 可以获取更详细信息。`),console.groupEnd(),t&&t({errMsg:"request:fail 小程序要求的 TLS 版本必须大于等于 1.2"})}function r(e,t){let{origin:o,fullPath:n,tls:r}=e;console.group(`${new Date} wx.request 错误`),console.error(`${o} 对应的服务器证书无效。控制台输入 showRequestInfo() 可以获取更详细信息。`),console.groupEnd(),t&&t({errMsg:"request:fail 对应的服务器证书无效。"})}const s=o(35),{getSecuryDetailsByURL:i,parseURL:a}=o(62),{MaxRequestConcurrent:c,urlCheckErrReason:l,DevtoolsConfig:d}=o(29),{checkUrl:u}=o(47),g="undefined"!=typeof __devtoolsConfig&&__devtoolsConfig&&__devtoolsConfig.libNumberVersion||999999999;let f={},p=1,w=0;const h=(e,t,o,a)=>{const d=e=>{setTimeout(()=>{w--,"function"==typeof o&&o(e)})};if(++w>c)return console.group(`${new Date} request 错误`),console.error(`同时最多发起 ${c} 个 request 请求，更多请参考文档：https://mp.weixin.qq.com/debug/wxadoc/dev/api/network-request.html`),console.groupEnd(),void d({errMsg:`${e}:fail exceed max task count`});let{url:f,responseType:p,__skipDomainCheck__:h}=t;if(!h&&!u(f))return void d({errMsg:`${e}:fail ${l}`});var _=t.method||"POST";if(0>["OPTIONS","GET","HEAD","POST","PUT","DELETE","TRACE","CONNECT"].indexOf(_))return void d({errMsg:`${e}:fail method is invalid`});let v=i(f);if(v.isReady){if(!v.isSecuryTLS)return void n(v,d);if(!v.isSecuryCertificate)return void r(v,d)}var m=t.header||{},y=new window.__global.XMLHttpRequest;y.responseType=p||"text",y.timeout=t.timeout||__wxConfig.networkTimeout&&__wxConfig.networkTimeout.request||6e4,y.open(_,t.url,!0),y.onreadystatechange=(()=>{if(y.readyState==(y.HEADERS_RECEIVED||2))try{const e=y.getAllResponseHeaders().trim().split(/[\r\n]+/),o={};e.forEach(function(e){const t=e.split(": "),n=t.shift(),r=t.join(": ");o[n]=r}),delete o["for-weapp-devtools"],"function"==typeof a&&1009093<=g&&a({state:"headersReceived",header:o})}catch(t){console.error(t)}if(y.readyState,4==y.readyState){y.onreadystatechange=null;var t=y.status;if(0==t);else{function o(o){if(o.isSecuryTLS)if(o.isSecuryCertificate)if(!y.responseURL||h||u(y.responseURL)){let o={errMsg:`${e}:ok`,header:c||{},statusCode:t};o.data="arraybuffer"===p?y.response:y.responseText,d(o)}else d({errMsg:`${e}:fail ${l}`});else r(o,d);else n(o,d)}let a=i(f),c={};try{c=JSON.parse(y.getResponseHeader("for-weapp-devtools"))}catch(t){}a.isReady?o(a):s.once(`TLS_CHECK_READY_${a.id}`,o)}}}),y.onerror=(()=>{d({errMsg:`${e}:fail`})}),y.ontimeout=(()=>{d({errMsg:`${e}:fail timeout`})}),y.onabort=(()=>{d({errMsg:`${e}:fail abort`})});let b=0;for(let e in m)"content-type"===e.toLowerCase()&&b++;2<=b&&delete m["content-type"];let k=!1;for(var S in m)if(m.hasOwnProperty(S)){let e=S.toLowerCase();k="content-type"==e||k,"cookie"===e?y.setRequestHeader("_Cookie",m[S]):y.setRequestHeader(S,m[S])}"POST"!=_||k||y.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");let E=t.data;try{y.send(E)}catch(t){d({errMsg:`${e}:fail`})}return y};e.exports={request:h,createRequestTask:(e,t,o=(()=>{}))=>{let n={id:p++,url:t.url,data:t.data,header:t.header,method:t.method,callback:(e,t)=>{let o={};o=0===t.errMsg.indexOf("request:ok")?{requestTaskId:e,state:"success",data:t.data,header:t.header,statusCode:t.statusCode}:{requestTaskId:e,state:"fail",errMsg:t.errMsg.replace(/^request:fail ?/,"")},delete f[e],s.emit("triggerOnEvent","onRequestTaskStateChange",o)}};o({errMsg:`${e}:ok`,requestTaskId:n.id}),f[n.id]=n,n.xhr=h("request",t,n.callback.bind(void 0,n.id),function(e){s.emit("triggerOnEvent","onRequestTaskStateChange",Object.assign({},e,{requestTaskId:n.id}))})},operateRequestTask:(e,t,o)=>{let n=t.requestTaskId,r=t.operationType,s=f[n];if(!s)return o({errMsg:`${e}:fail task not found`});if("abort"!==r)return o({errMsg:`${e}:fail illegal operationType`});try{s.xhr.abort(),o({errMsg:`${e}:ok`})}catch(n){o({errMsg:`${e}:fail ${n}`})}}}},209:function(e){const t={0:"log",1:"info",2:"warn",3:"error"};e.exports={reportKeyValue:(e,t,o)=>{o({errMsg:`${e}:ok`})},reportIDKey:(e,t,o)=>{o({errMsg:`${e}:ok`})},log:(e,o)=>{(o.dataArray||[]).forEach(e=>{let o=t[e.level];o&&e.msg&&console[o](e.msg)})}}},210:function(e,t,o){function n(e){(window.alert?window.alert:window.__global.alert)(`SET_SOCKET_HEADER:${JSON.stringify(e)}`)}function r(e){console.group(`${new Date} 无网络状态模拟`),console.error(`已开启无网络状态模拟，网络请求 ${e} 已被阻止；在模拟器工具栏切换网络状态，可恢复网络请求。`),console.groupEnd()}const s=o(35),{getSecuryDetailsByURL:i,parseURL:a}=o(62),{MaxWebsocketConnect:c,urlCheckErrReason:l,DevtoolsConfig:d}=o(29),{checkUrl:u}=o(47);let g={},f=1;var p=window.__global.WebSocket;const w={1000:"normal closure",1001:"going away",1002:"protocol error",1003:"unsupported data",1004:"reserved",1005:"no status rcvd",1006:"abnormal closure",1007:"invalid frame payload data",1008:"policy violation",1009:"message too big",1010:"mandatory ext.",1011:"internal server error",1015:"tls handshake"};let h=null;window.addEventListener("networkChange",e=>{if(d.networkStatus=e.detail.networkStatus,"none"==d.networkStatus)for(let e in h&&(h.close(),h=null),g){let t=g[e].socket;t&&t.close()}}),e.exports={connectSocket:(e,t,o=(()=>{}))=>{let{url:i,header:a}=t;return"none"==d.networkStatus?(r(i),void o({errMsg:`${e}:fail network is down`})):u(i,"socket")?(a&&0<Object.keys(a).length&&n(a),!h||h.readyState!=p.OPEN&&h.readyState!=p.CONNECTING?((h=new p(i,t.protocols||[])).binaryType="arraybuffer",h.onopen=function(){s.emit("triggerOnEvent","onSocketOpen",{})},h.onmessage=function(e){s.emit("triggerOnEvent","onSocketMessage",{data:e.data})},h.onclose=function(e){s.emit("triggerOnEvent","onSocketClose",{code:e.code,reason:e.reason||w[e.code]||""}),h=null},h.onerror=function(){s.emit("triggerOnEvent","onSocketError",{}),h=null},void o({errMsg:"connectSocket:ok"})):void o({errMsg:"connectSocket:fail websocket is connected"})):void o({errMsg:`connectSocket:fail ${l}`})},sendSocketMessage:(e,t,o)=>{let n=t.data,r="fail";if(h)try{h.readyState==p.OPEN?(h.send(n),r="ok"):r="fail webSocket is not connected"}catch(t){r=`fail ${t.message}`}o&&o({errMsg:`${e}:${r}`})},closeSocket:(e,t,o)=>{if(h)try{h.close(t.code,t.reason),h=null,o&&o({errMsg:"closeSocket:ok"})}catch(t){o&&o({errMsg:`closeSocket:fail ${t}`})}else o&&o({errMsg:"closeSocket:fail"})},createSocketTask:(e,t,o=(()=>{}))=>{let i=Object.keys(g).length,{url:a,header:h,protocols:_,__skipDomainCheck__:v}=t,m=f++,y={socketTaskId:m,url:a,protocols:_,header:h};if(o({socketTaskId:m,errMsg:`${e}:ok`}),i>=c)return void setTimeout(()=>{console.group(`${new Date} websocket 错误`),console.error(`同时最多发起 ${c} 个 socket 请求，更多请参考文档：https://mp.weixin.qq.com/debug/wxadoc/dev/api/network-socket.html`),console.groupEnd(),s.emit("triggerOnEvent","onSocketTaskStateChange",{socketTaskId:m,state:"error",errMsg:"exceed max task count"})});if("none"==d.networkStatus)return void setTimeout(()=>{r(a),s.emit("triggerOnEvent","onSocketTaskStateChange",{socketTaskId:m,state:"error",errMsg:"network is down"})});if(!v&&!u(a,"socket"))return void setTimeout(()=>{s.emit("triggerOnEvent","onSocketTaskStateChange",{socketTaskId:m,state:"error",errMsg:l})});g[m]=y,h&&0<Object.keys(h).length&&n(h);let b=new p(a,t.protocols||[]);b.binaryType="arraybuffer",b.onopen=function(){s.emit("triggerOnEvent","onSocketTaskStateChange",{socketTaskId:m,state:"open"})},b.onmessage=function(e){let t=e.data;s.emit("triggerOnEvent","onSocketTaskStateChange",{socketTaskId:m,data:t,state:"message"})},b.onclose=function(e){s.emit("triggerOnEvent","onSocketTaskStateChange",{socketTaskId:m,state:"close",code:e.code,reason:e.reason||w[e.code]||""}),delete g[m]},b.onerror=function(){s.emit("triggerOnEvent","onSocketTaskStateChange",{socketTaskId:m,state:"error",errMsg:""}),delete g[m]},y.socket=b},operateSocketTask:(e,t,o)=>{let{socketTaskId:n,operationType:r,code:s,reason:i,data:a}=t,c=g[n];if(!c)return o({errMsg:`${e}:fail task not found`});if("send"!==r){if("close"===r)try{c.socket.close(t.code,t.reason),o({errMsg:`${e}:ok`})}catch(n){o({errMsg:`${e}:fail ${n.message}`})}}else try{c.socket.readyState==p.OPEN?(c.socket.send(a),o({errMsg:`${e}:ok`})):o({errMsg:`${e}:fail webSocket is not connected`})}catch(n){o({errMsg:`${e}:fail ${n.message}`})}}}},211:function(e,t,o){const{arrayBufferToBase64:n}=o(33);e.exports={writeFile:{is:e=>e instanceof ArrayBuffer,trans:(e,t)=>(e.__dataisab=!0,n(t))},writeFileSync:{is:e=>e instanceof ArrayBuffer,trans:(e,t)=>(e.__dataisab=!0,n(t))}}},212:function(e,t,o){const{canNotReadFromCodePackage:n}=o(29);e.exports={readFile:e=>{let{filePath:t}=e;if(0!==t.indexOf(__wxConfig.env.LOCAL_PROTOCOL)){let e=t.split("."),o=1<e.length?e[e.length-1]:"";o&&n[o]&&(console.group(`${new Date} 读取文件失败`),console.info(`无法读取 ${t} 文件，该文件经过编译后在移动设备上不存在`),console.groupEnd())}}}},213:function(e){const t=window.__global.navigator.userAgent,o=(e,o,n)=>{if(!/gameservice/.test(t))return o;const r=o.canvasId,s=()=>{n({errMsg:`${e}:fail canvas not found`})};if(!r)return void(/Sync$/.test(e)?s():setTimeout(s));const{x:i=0,y:a=0,width:c=r.width,height:l=r.height,destWidth:d=r.width,destHeight:u=r.height,fileType:g="png"}=o,f=window.__global.document.createElement("canvas");Object.setPrototypeOf(f,window.__global.canvasProto),f.width=d,f.height=u;const p=f.getContext("2d");Object.setPrototypeOf(p,window.__global.canvas2dContextProto),p.drawImage(r,i,a,c,l,0,0,d,u);const w="jpg"==g?"image/jpeg":"image/png",h=isNaN(o.quality)?1:0<o.quality&&1>=o.quality?o.quality:1;return{dataURL:f.toDataURL(w,h).replace(/^data:image\/(jpg|png);base64,/,""),fileType:g}};e.exports={canvasToTempFilePath:o,canvasToTempFilePathSync:o}},214:function(e,t,o){e.exports=function(){function e(e,o,i,a){if(t.debugLog(`${new Date} WeixinJSBridge publish ${e}`,arguments),o&&0!==e.indexOf("canvas")){let t=JSON.stringify(o).length;if(t>r)return console.group(`${new Date} 数据传输错误`),console.error(`${e} 数据传输长度为 ${t} 已经超过最大长度 ${r}`),void console.groupEnd()}t.debugInfo({type:"publish",eventName:e,data:arguments,timesmap:new Date}),"appDataChange"!==e&&"pageInitData"!==e&&"__updateAppData"!==e||a||n.send({command:"SEND_APP_DATA",data:__wxAppData}),"invokeWebviewMethod"===e&&o&&o.data&&"appDataChange"==o.data.name&&(s&&n.send({command:"SEND_APP_DATA",data:__wxAppData}),s=!0),("vdSync"===e||"vdSyncBatch"===e)&&(s&&n.send({command:"SEND_APP_DATA",data:__wxAppData}),s=!0),n.send({command:"APPSERVICE_PUBLISH",data:{eventName:e,data:o,webviewIds:i}})}const t=o(33),n=o(34),{AppserviceMaxDataSize:r}=o(29);var s=!0;return n.registerCallback(t=>{let{command:o,data:r,fromWebviewID:i}=t;if("WRITE_APP_DATA"===o){let t={};const o=getCurrentPages();for(let n in o.forEach(e=>{t[e.__route__||e.route]=e}),r){let o=r[n],i=o.__webviewId__;for(var a in t[n]&&"function"==typeof t[n].setData?(s=!1,t[n].setData(o)):wx&&wx.invokeWebviewMethod?(s=!1,wx.invokeWebviewMethod({name:"appDataChange",args:{data:o}})):e("appDataChange",{data:{data:o}},[i],!0),Object.assign(__wxAppData[n],o),__wxAppData[n])void 0==o[a]&&delete __wxAppData[n][a]}}else"GET_APP_DATA"===o&&n.send({command:"SEND_APP_DATA",data:__wxAppData})}),{publish:e}}},215:function(e,t,o){e.exports=function(){function e(e,t,o){let n=s[e];"function"==typeof n&&n(t,o)}const t=o(33),n=o(35),r=o(34);var s={};return n.on("triggerSubscribeEvent",(t,o)=>{e(t,o)}),r.registerCallback(t=>{let{command:o,data:n,fromWebviewID:r}=t;"WEBVIEW_PUBLISH"===o&&e(n.eventName,n.data,r)}),{subscribe:function(e,o){t.debugLog(`${new Date} WeixinJSBridge subscribe`,arguments),t.debugInfo({type:"subscribe",eventName:e,data:arguments,timesmap:new Date}),s[e]=o},triggerSubscribeEvent:e}}},216:function(e){e.exports=function(){if(["Caches","screen","performance ","getComputedStyle","openDatabase","btoa","Image"].forEach(e=>{delete window[e]}),window.chrome=void 0,"complete"==window.__global.document.readyState)window.__global.history.replaceState({},{},`${location.href}?load`);else{const e=()=>{window.__global.history.replaceState({},{},`${location.href}?load`),window.__global.removeEventListener("load",e)};window.__global.addEventListener("load",e)}}},29:function(e){window.__devtoolsConfig=window.__devtoolsConfig||{setting:{}},window.__wxConfig=window.__wxConfig||{};const t={getSystemInfo:!0,getBatteryInfo:!0,getBackgroundAudioState:!0,setBackgroundAudioState:!0,operateBackgroundAudio:!0,createRequestTask:!0,createUploadTask:!0,createDownloadTask:!0,createSocketTask:!0,operateSocketTask:!0,createAudioInstance:!0,unlink:!0,createLoadSubPackageTask:!0};let o=__devtoolsConfig,n=__devtoolsConfig.network||{},r=__devtoolsConfig.permission,s=__devtoolsConfig.setting&&__devtoolsConfig.setting.MaxDataSize||1048576,i=__devtoolsConfig.setting&&__devtoolsConfig.setting.MaxRequestConcurrent||10,a=__devtoolsConfig.setting&&__devtoolsConfig.setting.MaxWebsocketConnect||10;e.exports={syncSDKList:t,isSyncSDK:function(e){return!!t[e]||/Sync$/.test(e)},DevtoolsConfig:o,NetworkConfig:n,Permission:r,AppserviceMaxDataSize:s,MaxRequestConcurrent:i,MaxWebsocketConnect:a,urlCheckErrReason:"url not in domain list",needTransArgsBase64Api:{encodeArrayBufferSync:!0,decodeArrayBufferSync:!0},canNotReadFromCodePackage:{js:!0,wxss:!0,wxml:!0}}},33:function(e,t,o){var n=this;const r=o(34);o(204);let s=!1,i=[];r.registerCallback(e=>{let{command:t,data:o}=e;"SYSTEM_CALLBACK"===t&&function(e,t){switch(e){case"showSystemInfo":{let e=t.memory,o=t.restartInfo,n=o.restartTimes;console.group(`${new Date} 工具系统信息`),console.info(`${o.beginTime} 启动工具，执行编译 ${n} 次， 当前内存占用 ${e.toFixed(2)}m`),console.table(t.info),console.groupEnd();break}case"checkProxy":console.group(`${new Date} 代理信息`),console.table(t),console.groupEnd();break;case"showDecryptedInfo":console.group(`${new Date} 加解密信息`),console.table(t),console.groupEnd()}}(o.api,o.data)}),window.showDebugInfo=((e,t)=>{let o=i.filter(o=>{let n=!e||(Array.isArray(e)?e.includes(o.type):o.type===e),r=!t||(Array.isArray(t)?t.includes(o.eventName):o.eventName===t);if(n&&r)return o});console.group("showDebugInfo"),o.forEach(e=>{console.group(`${e.timesmap} WeixinJSBridge ${e.type} ${e.eventName}`),console.debug.apply(window,e.data),console.groupEnd()}),console.groupEnd(),s=!0});const a=()=>(console.clear(),void(s=!1));Object.defineProperty(window,"closeDebug",{get:()=>(a(),a)});const c=()=>void console.table(i);Object.defineProperty(window,"showDebugInfoTable",{get:()=>(c(),c)});const l=()=>void console.table([{fun:"build","arg[0]":"","arg[1]":"",example:"build",description:"build / reload"},{fun:"preview","arg[0]":"","arg[1]":"",example:"preview",description:"preview with QR code"},{fun:"upload","arg[0]":"","arg[1]":"",example:"upload",description:"upload the app"},{fun:"showDebugInfo","arg[0]":"type -- String || Array; publish on subscribe invoke GetMsg","arg[1]":"eventName -- String || Array;",example:'showDebugInfo() showDebugInfo("publish") showDebugInfo(["publish", "invoke"], "onAppRoute")',description:"open tools logs"},{fun:"closeDebug"},{fun:"showDebugInfoTable"},{fun:"openToolsLog","arg[0]":"","arg[1]":"",example:"openVendor",description:"open log folder"},{fun:"openPlugin","arg[0]":"","arg[1]":"",example:"openPlugin",description:"open plugin folder"},{fun:"openVendor","arg[0]":"","arg[1]":"",example:"openVendor",description:"open vendor folder"},{fun:"showRequestInfo","arg[0]":"","arg[1]":"",example:"showRequestInfo",description:"show request info"},{fun:"showSystemInfo","arg[0]":"","arg[1]":"",example:"showSystemInfo",description:"show tools info"},{fun:"checkProxy","arg[0]":"type -- String; url",example:'checkProxy("http://www.qq.com")',description:"checkProxy of the input url"},{fun:"showDecryptedInfo","arg[0]":"",example:"showDecryptedInfo",description:"show API decrypted info"}]);Object.defineProperty(window,"help",{get:()=>(l(),l)});const d=()=>(()=>{let e={};for(let t in window.securityDetails)if(0!==t.indexOf(`http://${__wxConfig.apphash}`)){let o=window.securityDetails[t];delete o.id,delete o.command,delete o.isReady,delete o.url,e[t]=o}console.table(e)})();Object.defineProperty(window,"showRequestInfo",{get:()=>(d(),d)});const u=(e,t)=>{r.send({command:"SYSTEM",data:{api:e,data:t}})},g=()=>u("openToolsLog");Object.defineProperty(window,"openToolsLog",{get:()=>(g(),g)});const f=()=>u("openPlugin");Object.defineProperty(window,"openPlugin",{get:()=>(f(),f)});const p=()=>u("openVendor");Object.defineProperty(window,"openVendor",{get:()=>(p(),p)});Object.defineProperty(window,"showSystemInfo",{get:()=>(console.log("loading..."),u("showSystemInfo"),()=>{})}),window.checkProxy=function(e){return"string"==typeof e?(console.log("checking..."),void u("checkProxy",e)):console.log("param should be string")};const w=()=>u("syncMessage");Object.defineProperty(window,"syncMessage",{get:()=>(w(),w)});const h=()=>void r.send({command:"SYSTEM",data:{api:"showDecryptedInfo"}});Object.defineProperty(window,"showDecryptedInfo",{get:()=>(h(),h)}),e.exports={debugLog:(e,t)=>{s&&(console.group(e),console.debug.apply(n,t),console.groupEnd(e))},debugInfo:e=>{s||(i.length>100&&(i=[]),i.push(e))},isDev:()=>s,base64ToArrayBuffer:function(e){let t=window.__global.atob(e),o=t.length,n=new Uint8Array(o);for(let e=0;e<o;e++)n[e]=t.charCodeAt(e);return n.buffer},arrayBufferToBase64:function(e){let t="",o=new Uint8Array(e),n=o.byteLength;for(let e=0;e<n;e++)t+=String.fromCharCode(o[e]);return window.__global.btoa(t)}}},34:function(e,t,o){function n(){let e="APPSERVICE";/widgetservice/.test(r)?e="WIDGETSERVICE":/gameservice/.test(r)&&(e="GAMESERVICE",s.registerCallback(e=>{let{command:t,data:o}=e;if("SET_CANVAS"===t){let e=window.__global.document.getElementById("myCanvas");e.setAttribute("width",o.width),e.setAttribute("height",o.height),e.setAttribute("style",o.style)}})),s.connect(e)}const r=window.__global.navigator.userAgent,s=o(20);"complete"==window.__global.document.readyState?n():window.__global.addEventListener("load",()=>{n()}),e.exports={send:s.send,registerCallback:s.registerCallback}},35:function(e,t,o){const n=o(205).EventEmitter;e.exports=new n},46:function(e){const t=()=>"touristappid"==__devtoolsConfig.appid,o=t()?Object.assign(__devtoolsConfig.userInfo):{};delete __devtoolsConfig.userInfo;const n={login:(e,t,o)=>{o({errMsg:"login:ok",code:"the code is a mock one"})},authorize:(e,t,o)=>{o({errMsg:"authorize:fail"})},operateWXData:(e,t,n)=>{n({errMsg:"operateWXData:ok",data:{data:JSON.stringify({nickName:o.nickName,avatarUrl:o.headUrl,gender:"male"===o.sex?1:2,province:o.province,city:o.city,country:o.country})}})},openSetting:(e,t,o)=>{o({errMsg:"openSetting:ok",authSetting:[{scope:"scope.userInfo",state:1}]})}};e.exports={isTourist:t,fake:n,check:function(e){return t()&&n.hasOwnProperty(e)&&(console.group(`${new Date} 无 AppID 关联`),console.warn(`请注意无 AppID 关联下，调用 wx.${e} 是受限的, API 的返回是工具的模拟返回`),console.groupEnd(),setTimeout(()=>{n[e].apply(this,arguments)}),!0)}}},47:function(e,t,o){function n(e,t="request"){if(r.isTourist())return d&&(console.group(`${new Date} 无 AppID 关联`),console.warn("工具未检查合法域名，更多请参考文档：https://mp.weixin.qq.com/debug/wxadoc/dev/api/network-request.html"),console.groupEnd(),d=!1),!0;if(!__devtoolsConfig.urlCheck)return __disPlayURLCheckWarning&&(console.group(`${new Date} 配置中关闭合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书检查`),console.warn("工具未校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书。"),console.groupEnd(),__disPlayURLCheckWarning=!1),!0;if(!e)return!1;if(/(\?|&)skip_domain_check=true(&|$)/.test(e))return!0;if(!(e=u.exec(e.toLowerCase())))return!1;if(e=e[0],/^http:\/\/(tmp|usr|store)\/?$/gi.test(e))return!0;try{let o=[];o="downloadFile"===t?i.download:"uploadFile"===t?i.upload:"socket"===t?i.socket:i.request;for(let n=0;n<o.length;n++){let r=o[n],s=u.exec(r.toLowerCase());if(s&&s[0]==e)return!0;if("socket"==t&&l.setting.WebsocketSkipPortCheck){if(new RegExp(`^${r}(:\\d+)?$`).test(e))return!0}}let n=[];o.forEach(e=>{n.push([e])}),console.group(`${new Date} ${t} 合法域名校验出错`),console.info("如若已在管理后台更新域名配置，请刷新项目配置后重新编译项目，操作路径：“详情-域名信息”"),console.error(` ${e} 不在以下 ${t} 合法域名列表中，请参考文档：https://mp.weixin.qq.com/debug/wxadoc/dev/api/network-request.html`),console.table(n),console.groupEnd()}catch(t){return console.error(t),!1}}const r=o(46),{MaxRequestConcurrent:s,NetworkConfig:i,appconfig:a,urlCheckErrReason:c,DevtoolsConfig:l}=o(29);window.__disPlayURLCheckWarning=!0;var d=!0,u=/^(http|ws)s?:\/\/[\w-.]+(:\d+)?/i;e.exports={downloadFile:function(e,t,o){return!!n(t.url,"downloadFile")||(o({errMsg:`${e}:fail ${c}`}),!1)},uploadFile:function(e,t,o){return!!n(t.url,"uploadFile")||(o({errMsg:`${e}:fail ${c}`}),!1)},checkUrl:n,createUploadTask:function(e,t,o){return t.__skipDomainCheck__||n(t.url,"uploadFile")||(o({errMsg:`${e}:fail ${c}`}),!1)},createDownloadTask:function(e,t,o){return t.__skipDomainCheck__||n(t.url,"downloadFile")||(o({errMsg:`${e}:fail ${c}`}),!1)},operateWXData:function(e,t){return t.data&&"webapi_getuserinfo"==t.data.api_name&&!t.data.from_component&&(console.group(`${new Date} 接口调整`),console.warn("获取 wx.getUserInfo 接口后续将不再出现授权弹窗，请注意升级\n参考文档: https://developers.weixin.qq.com/blogdetail?action=get_post_info&lang=zh_CN&token=1650183953&docid=0000a26e1aca6012e896a517556c01"),console.groupEnd()),!0},authorize:function(e,t){return"scope.userInfo"==t.scope&&(console.group(`${new Date} 接口调整`),console.error('wx.authorize({scope: "scope.userInfo"}) 不会出现授权弹窗，请使用 <button open-type="getUserInfo />\n参考文档: https://developers.weixin.qq.com/blogdetail?action=get_post_info&lang=zh_CN&token=1650183953&docid=0000a26e1aca6012e896a517556c01'),console.groupEnd()),!0}}},62:function(e,t,o){function n(e){let t=document.createElement("a");return t.href=e,{protocol:t.protocol,origin:t.origin,fullPath:`${t.origin}/${t.pathname}`}}const r=o(46),s=o(35);var i=window.securityDetails={"https://servicewechat.com":{isSecuryTLS:!0,securityState:"secure",isReady:!0,isSecuryCertificate:!0,tls:"TLS 1.2"}},a=1e4;window.setSecurityDetails=function(e,t){let{origin:o}=n(e);t=JSON.parse(t),i[o]||(i[o]={});let{protocol:r,securityState:a}=t,c=!1;r&&(c=1.2<=parseFloat(r.replace("TLS ",""))),i[o].isSecuryTLS=c,i[o].tls=r,i[o].securityState=a,i[o].isSecuryCertificate="insecure"!==a,i[o].isReady=!0,i[o].remoteAddress=t.remoteAddress,i[o].statusCode=t.statusCode;let l=i[o].id;s.emit(`TLS_CHECK_READY_${l}`,i[o])},e.exports={securityDetails:i,getSecuryDetailsByURL:function(e){let{protocol:t,origin:o,fullPath:s}=n(e),c=i[o];return r.isTourist()||!__devtoolsConfig.urlCheck||"https:"!==t?(c={isReady:!0,isSecuryTLS:!0,isSecuryCertificate:!0},i[o]=c,c):c||(c={isReady:!1,id:a++,tls:"",isSecuryTLS:!1,securityState:"",isSecuryCertificate:!1,protocol:t,origin:o,fullPath:s,url:e},i[o]=c,c)},parseURL:n}}});
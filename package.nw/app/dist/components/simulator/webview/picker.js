"use strict";function init(){var e=require("../../../lib/react.js"),t=(require("../../../lib/react-dom.js"),require("../../../stores/webviewStores.js")),s=require("../../../actions/webviewActions.js"),i=require("./selectorRing.js"),r=require("./timeRing.js"),a=require("./dateRing.js"),n=e.createClass({displayName:"Picker",getInitialState:function(){return{mode:"selector",hidden:!0,array:[],lazyLoaded:!1}},componentDidMount:function(){t.on("SET_INTERFACE_ASYNC_RES",this._handleWebviewsdkCommand)},componentWillUnmount:function(){t.removeListener("SET_INTERFACE_ASYNC_RES",this._handleWebviewsdkCommand)},_handleWebviewsdkCommand:function(e,t,s,i){var r=i.args;this.webviewID=e,this.sdkName=t,"showPickerView"===t?this.setState({mode:"selector",array:r.array,current:r.current,lazyLoaded:!0,hidden:!1}):"showDatePickerView"===t&&this.setState({mode:r.mode,start:r.range&&r.range.start||"",end:r.range&&r.range.end||"",current:r.current||"",fields:r.fields||"day",lazyLoaded:!0,hidden:!1})},hide:function(){this.setState({hidden:!0,mode:"none",current:-1})},confirm:function(){var e=this.refs[this.state.mode].getValue();"showPickerView"===this.sdkName?s.sendJSSDKRes(this.webviewID,this.sdkName,{errMsg:this.sdkName+":ok",index:parseInt(e)}):"showDatePickerView"===this.sdkName&&s.sendJSSDKRes(this.webviewID,this.sdkName,{errMsg:this.sdkName+":ok",value:e}),this.hide()},cancel:function(){this.hide(),"showPickerView"===this.sdkName?s.sendJSSDKRes(this.webviewID,this.sdkName,{errMsg:this.sdkName+":cancel"}):"showDatePickerView"===this.sdkName&&s.sendJSSDKRes(this.webviewID,this.sdkName,{errMsg:this.sdkName+":cancel"})},render:function(){return this.state.lazyLoaded?e.createElement("div",{style:{display:this.state.hidden?"none":""}},e.createElement("div",{className:"wx-picker-mask",onClick:this.hide}),e.createElement("div",{className:"wx-picker"},e.createElement("div",{className:"wx-picker-hd"},e.createElement("a",{className:"wx-picker-action",onClick:this.cancel},"取消"),e.createElement("a",{className:"wx-picker-action",onClick:this.confirm},"确定")),e.createElement(i,{ref:"selector",array:this.state.array,current:this.state.current,show:"selector"==this.state.mode}),e.createElement(r,{ref:"time",current:this.state.current+"",start:this.state.start,end:this.state.end,show:"time"==this.state.mode}),e.createElement(a,{ref:"date",current:this.state.current+"",start:this.state.start,end:this.state.end,fields:this.state.fields,show:"date"==this.state.mode}))):null}});_exports=n}var _exports;init(),module.exports=_exports;